<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Servlet学习笔记 | Magi's Blog</title><meta name="keywords" content="Servlet"><meta name="author" content="Magi"><meta name="copyright" content="Magi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Servlet技术(@Author: Magi)一、JavaEE简介1.什么是javaEE​		JavaEE（Java Enterprise Edition），java企业版，是一个用于企业版web开发平台。最早由Sun公司定制并发布，后由Oracle负责维护。在Java EE平台规范了在开发企业级web应用中的技术标准。 ​		在JavaEE平台共包含了13个技术规范（随着 JavaEE 版本的">
<meta property="og:type" content="article">
<meta property="og:title" content="Servlet学习笔记">
<meta property="og:url" content="https://starhunter-23.github.io/archives/1a5315c2.html">
<meta property="og:site_name" content="Magi&#39;s Blog">
<meta property="og:description" content="Servlet技术(@Author: Magi)一、JavaEE简介1.什么是javaEE​		JavaEE（Java Enterprise Edition），java企业版，是一个用于企业版web开发平台。最早由Sun公司定制并发布，后由Oracle负责维护。在Java EE平台规范了在开发企业级web应用中的技术标准。 ​		在JavaEE平台共包含了13个技术规范（随着 JavaEE 版本的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://w.wallhaven.cc/full/l8/wallhaven-l89k8p.jpg">
<meta property="article:published_time" content="2022-09-27T08:53:00.000Z">
<meta property="article:modified_time" content="2022-09-27T09:40:13.972Z">
<meta property="article:author" content="Magi">
<meta property="article:tag" content="Servlet">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://w.wallhaven.cc/full/l8/wallhaven-l89k8p.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://starhunter-23.github.io/archives/1a5315c2"><link rel="preconnect" href="//cdn.jsdelivr.net"/><meta name="baidu-site-verification" content="code-Qk5c72VSpv"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":90,"position":"top","messagePrev":"该文章创建于","messageNext":"天前，请以最新文章或技术为准"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Servlet学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-09-27 17:40:13'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/./img/ava.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-music"></i><span> 链接</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://w.wallhaven.cc/full/l8/wallhaven-l89k8p.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Magi's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-music"></i><span> 链接</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Servlet学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-27T08:53:00.000Z" title="发表于 2022-09-27 16:53:00">2022-09-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-09-27T09:40:13.972Z" title="更新于 2022-09-27 17:40:13">2022-09-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B/">编程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">20.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>87分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Servlet技术-Author-Magi"><a href="#Servlet技术-Author-Magi" class="headerlink" title="Servlet技术(@Author: Magi)"></a>Servlet技术(@Author: Magi)</h1><h2 id="一、JavaEE简介"><a href="#一、JavaEE简介" class="headerlink" title="一、JavaEE简介"></a>一、JavaEE简介</h2><h3 id="1-什么是javaEE"><a href="#1-什么是javaEE" class="headerlink" title="1.什么是javaEE"></a>1.什么是javaEE</h3><p>​		JavaEE（Java Enterprise Edition），java企业版，是一个用于企业版web开发平台。最早由Sun公司定制并发布，后由Oracle负责维护。在Java EE平台规范了在开发企业级web应用中的技术标准。</p>
<p>​		在JavaEE平台共包含了13个技术规范（随着 JavaEE 版本的变化所包含的技术点的数量会有增多）。他们分别是：JDBC,JNDI,EJB,RMI,SERVLET,JSP,XML,JMS,JAVA IDL,JPA,JTA,JavaMail和JAF。</p>
<h3 id="2-JavaEE版本"><a href="#2-JavaEE版本" class="headerlink" title="2.JavaEE版本"></a>2.JavaEE版本</h3><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313162642208.png" alt="image-20220313162642208"></p>
<h2 id="二、Servlet简介"><a href="#二、Servlet简介" class="headerlink" title="二、Servlet简介"></a>二、Servlet简介</h2><h3 id="1-Web开发历史回顾"><a href="#1-Web开发历史回顾" class="headerlink" title="1.Web开发历史回顾"></a>1.Web开发历史回顾</h3><h4 id="1-1CGI"><a href="#1-1CGI" class="headerlink" title="1.1CGI"></a>1.1CGI</h4><p>公共网关接口（Common GateWay Interface，CGI）是Web服务器运行时外部程序的规范。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313162820908.png" alt="image-20220313162820908"></p>
<h4 id="1-2CGI缺点"><a href="#1-2CGI缺点" class="headerlink" title="1.2CGI缺点"></a>1.2CGI缺点</h4><ol>
<li>以进程方式运行，对每一个客户端的请求都要启动一个进程来运行程序，导致用户数目增加时，服务器端资源被大量占用。</li>
<li>不同的CGI之间不能共享资源</li>
<li>由于对操作系统和进程的不深刻理解，使得开发人员开发的CGI程序经常遇到莫名其妙的错误。</li>
</ol>
<h4 id="1-3FastCGI"><a href="#1-3FastCGI" class="headerlink" title="1.3FastCGI"></a>1.3FastCGI</h4><p>FastCGI 是对 CGI 模式的一个改进，采用了 Pooling 技术，一定程度上改善了性能，但是 由于仍然是基于进程运行的所以并没有从根本上解决问题。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313163106982.png" alt="image-20220313163106982"></p>
<h3 id="2-Servlet介绍"><a href="#2-Servlet介绍" class="headerlink" title="2.Servlet介绍"></a>2.Servlet介绍</h3><p><strong>*<u>Servlet是Servlet Applet的简称</u><em><strong>，</strong></em><u>称为服务端小程序。</u><em><strong>是JavaEE平台下的技术标准，基本java语言编写的服务端程序。Web容器或应用服务器实现了Servlet标准所以Servlet需要运行在</strong>Web容器或应用服务器</em>*中，</strong><em>Servlet主要功能在于能够在服务器中执行并生成数据。</em>**</p>
<h4 id="2-1-Servlet技术特点"><a href="#2-1-Servlet技术特点" class="headerlink" title="2.1 Servlet技术特点"></a>2.1 Servlet技术特点</h4><p>Servlet使用单进程多线程方式运行</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313163813472.png" alt="image-20220313163813472"></p>
<h3 id="2-2-Servlet在应用程序中的位置"><a href="#2-2-Servlet在应用程序中的位置" class="headerlink" title="2.2 Servlet在应用程序中的位置"></a>2.2 Servlet在应用程序中的位置</h3><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313163927979.png" alt="image-20220313163927979"></p>
<h2 id="三、服务器"><a href="#三、服务器" class="headerlink" title="三、服务器"></a>三、服务器</h2><h3 id="1-JavaEE应用服务器（Java-EE-Application-Server）"><a href="#1-JavaEE应用服务器（Java-EE-Application-Server）" class="headerlink" title="1.JavaEE应用服务器（Java  EE Application  Server）"></a>1.JavaEE应用服务器（Java  EE Application  Server）</h3><p>​		应用服务器是 Java EE 规范的具体实现, 可以执行&#x2F;驱动基于 JavaEE 平台开发的 web 项 目。绝大部分的应用服务器都是付费产品。 </p>
<p>常见的应用服务： </p>
<p>Weblogic（BEA Oracle 收费） </p>
<p>Webshpere（IBM 收费） </p>
<p>JBoss（RedHad 收费）</p>
<p>Resin（Caucho 收费） </p>
<p>JRun（Macromedia 收费） </p>
<p>Geronimo（Apache 免费） </p>
<h3 id="2-Web容器（Web-Server）"><a href="#2-Web容器（Web-Server）" class="headerlink" title="2.Web容器（Web Server）"></a>2.Web容器（Web Server）</h3><p>​		只实现了JavaEE平台下部分技术标准，如Servlet，Jsp，JNDI，JavaMail，Web容器是开源免费的</p>
<p>Tomcat（Apache 开源免费的）</p>
<p>Jetty（Jetty 开源免费的）</p>
<h3 id="3-Tomcat的使用"><a href="#3-Tomcat的使用" class="headerlink" title="3. Tomcat的使用"></a>3. Tomcat的使用</h3><h4 id="3-1-Tomcat下载与安装"><a href="#3-1-Tomcat下载与安装" class="headerlink" title="3.1 Tomcat下载与安装"></a>3.1 Tomcat下载与安装</h4><h5 id="3-1-1-下载"><a href="#3-1-1-下载" class="headerlink" title="3.1.1 下载"></a>3.1.1 下载</h5><p>下载地址：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://tomcat.apache.org/">https://tomcat.apache.org/</a></p>
<h5 id="3-1-2-安装"><a href="#3-1-2-安装" class="headerlink" title="3.1.2 安装"></a>3.1.2 安装</h5><p>Tomcat 是绿色软件，解压就可使用。 </p>
<h5 id="3-1-3"><a href="#3-1-3" class="headerlink" title="3.1.3"></a>3.1.3</h5><p>Tomcat是用Java语言开发的Web容器，所以在使用Tomcat时需要在操作系统中正确配置环境变量</p>
<p>JAVA_HOME：C:\Program Files\Java\jdk1.8.0_171（jdk的版本）</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313164927149.png" alt="image-20220313164927149"></p>
<p>PATH：%JAVA_HOME%\bin</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313165000299.png" alt="image-20220313165000299"></p>
<p>CLASS_PATH：%JAVA_HOME%\lib</p>
<h4 id="3-2-Tomcat目录结构与介绍"><a href="#3-2-Tomcat目录结构与介绍" class="headerlink" title="3.2 Tomcat目录结构与介绍"></a>3.2 Tomcat目录结构与介绍</h4><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313165200125.png" alt="image-20220313165200125"></p>
<h5 id="3-2-1-bin"><a href="#3-2-1-bin" class="headerlink" title="3.2.1. bin"></a>3.2.1. bin</h5><p>bin 目录主要是用来存放 tomcat 的命令文件，主要有两大类，一类是以.sh 结尾的（linux 命令），另一类是以.bat 结尾的（windows 命令）。</p>
<h5 id="3-2-2-conf"><a href="#3-2-2-conf" class="headerlink" title="3.2.2 conf"></a>3.2.2 conf</h5><p>conf目录主要是用来存放tomcat的一些配置文件。</p>
<h5 id="3-2-3-lib"><a href="#3-2-3-lib" class="headerlink" title="3.2.3 lib"></a>3.2.3 lib</h5><p>lib目录主要用来存放tomcat运行需要加载的jar包。</p>
<h5 id="3-2-4-logs"><a href="#3-2-4-logs" class="headerlink" title="3.2.4 logs"></a>3.2.4 logs</h5><p>logs 目录用来存放 tomcat 在运行过程中产生的日志文件。</p>
<h5 id="3-2-5-temp"><a href="#3-2-5-temp" class="headerlink" title="3.2.5 temp"></a>3.2.5 temp</h5><p>temp 目录用户存放 tomcat 在运行过程中产生的临时文件。（清空不会对 tomcat 运行带来影响） </p>
<h5 id="3-2-6-webapps"><a href="#3-2-6-webapps" class="headerlink" title="3.2.6 webapps"></a>3.2.6 webapps</h5><p>webapps 目录用来存放应用程序，当 tomcat 启动时会去加载 webapps 目录下的应用程序。可以以文件夹、war 包的形式发布应用。</p>
<h5 id="3-2-7-work"><a href="#3-2-7-work" class="headerlink" title="3.2.7 work"></a>3.2.7 work</h5><p>work 目录用来存放 tomcat 在运行时的编译后文件，例如 JSP 编译后的文件。</p>
<h4 id="3-3-Tocmat启动与关闭"><a href="#3-3-Tocmat启动与关闭" class="headerlink" title="3.3 Tocmat启动与关闭"></a>3.3 Tocmat启动与关闭</h4><p>Tomcat 的启动与关闭需要执行 bin 目录中的命令脚本。</p>
<h5 id="3-3-1-Tomcat启动"><a href="#3-3-1-Tomcat启动" class="headerlink" title="3.3.1 Tomcat启动"></a>3.3.1 Tomcat启动</h5><p>运行shutdown.bat文件</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313165733966.png" alt="image-20220313165733966"></p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313165751197.png" alt="image-20220313165751197"></p>
<h5 id="3-3-2-Tomcat关闭"><a href="#3-3-2-Tomcat关闭" class="headerlink" title="3.3.2 Tomcat关闭"></a>3.3.2 Tomcat关闭</h5><h6 id="3-3-2-1-方式一"><a href="#3-3-2-1-方式一" class="headerlink" title="3.3.2.1 方式一"></a>3.3.2.1 方式一</h6><p>运行 shutdown.bat 文件</p>
<h4 id=""><a href="#" class="headerlink" title=""></a><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313170053117.png" alt="image-20220313170053117"></h4><h6 id="3-3-2-2-方式二"><a href="#3-3-2-2-方式二" class="headerlink" title="3.3.2.2 方式二"></a>3.3.2.2 方式二</h6><p>直接关闭掉启动窗口</p>
<h5 id="3-3-3-访问Tomcat"><a href="#3-3-3-访问Tomcat" class="headerlink" title="3.3.3 访问Tomcat"></a>3.3.3 访问Tomcat</h5><p>访问 Tomcat 的 URL 格式：<a href="http://ip:port" rel="external nofollow noreferrer">http://ip:port</a> </p>
<p>访问本机 Tomcat 的 URL 格式：<a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:8080/">http://localhost:8080</a> </p>
<h4 id="3-4-Tomcat的配置"><a href="#3-4-Tomcat的配置" class="headerlink" title="3.4 Tomcat的配置"></a>3.4 Tomcat的配置</h4><h5 id="3-4-1-Tomcat配置文件介绍"><a href="#3-4-1-Tomcat配置文件介绍" class="headerlink" title="3.4.1 Tomcat配置文件介绍"></a>3.4.1 Tomcat配置文件介绍</h5><p>Tomcat 的配置文件由 4 个 xml 组成，分别是 ***<u>context.xml、web.xml、server.xml、tomcat-users.xml</u>***。每个文件都有自己的功能与配置方法。</p>
<h6 id="3-4-1-1-context-xml"><a href="#3-4-1-1-context-xml" class="headerlink" title="3.4.1.1 context.xml"></a>3.4.1.1 context.xml</h6><p>Context.xml 是 Tomcat 公用的环境配置。 Tomcat 服务器会定时去扫描这个文件。一旦发现文件被修改（时间戳改变了），就会自动重新加载这个文件，而不需要重启服务器 。</p>
<h6 id="3-4-1-2-web-xml"><a href="#3-4-1-2-web-xml" class="headerlink" title="3.4.1.2 web.xml"></a>3.4.1.2 web.xml</h6><p>Web 应用程序描述文件，都是关于是 Web 应用程序的配置文件。所有 Web 应用的web.xml 文件的父文件。 </p>
<h6 id="3-4-1-3-server-xml"><a href="#3-4-1-3-server-xml" class="headerlink" title="3.4.1.3 server.xml"></a>3.4.1.3 server.xml</h6><p>是 tomcat 服务器的核心配置文件，server.xml 的每一个元素都对应了 tomcat 中的一个组件，通过对 xml 中元素的配置，实现对 tomcat 中的各个组件和端口的配置。</p>
<h6 id="3-4-1-4-tomcat-users-xml"><a href="#3-4-1-4-tomcat-users-xml" class="headerlink" title="3.4.1.4  tomcat-users.xml"></a>3.4.1.4  tomcat-users.xml</h6><p>配置访问 Tomcat 的用户以及角色的配置文件。</p>
<h5 id="3-4-2-解决控制台乱码"><a href="#3-4-2-解决控制台乱码" class="headerlink" title="3.4.2 解决控制台乱码"></a>3.4.2 解决控制台乱码</h5><p>​		控制台产生乱码的原因是在 Tomcat 在输出日志中使用的是 UTF-8 编码，而我们中文的Windows 操作系统使用的是 GBK 编码。由于编码格式不统一，所以出现了乱码。</p>
<p>解决方式：</p>
<p>修改 conf 目录中的 logging.properties 文件重新指定的编码方式。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313171532568.png" alt="image-20220313171532568"></p>
<p>java.util.logging.ConsoleHandler.encoding &#x3D; GBK</p>
<h5 id="3-4-3-修改Tomcat监听端口"><a href="#3-4-3-修改Tomcat监听端口" class="headerlink" title="3.4.3 修改Tomcat监听端口"></a>3.4.3 修改Tomcat监听端口</h5><p>​		Tomcat 默认监听端口为 8080。可以通过修改 server.xml 文件来改变 Tomcat 的监听端口。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span> <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span> <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313172154788.png" alt="image-20220313172154788"></p>
<h5 id="3-4-4-配置Tomcat-Manager"><a href="#3-4-4-配置Tomcat-Manager" class="headerlink" title="3.4.4 配置Tomcat Manager"></a>3.4.4 配置Tomcat Manager</h5><h6 id="3-4-4-1-什么是-Tomcat-Manager"><a href="#3-4-4-1-什么是-Tomcat-Manager" class="headerlink" title="3.4.4.1 什么是 Tomcat Manager"></a><strong>3.4.4.1</strong> <strong>什么是</strong> <strong>Tomcat Manager</strong></h6><p>​		Tomcat Manager 是 Tomcat 自带的、用于对 Tomcat 自身以及部署在 Tomcat 上的应用进行管理的 web 应用。默认情况下，Tomcat Manager 是处于禁用状态的。准确的说，TomcatManager 需要以用户角色进行登录并授权才能使用相应的功能，不过 Tomcat 并没有配置任 何默认的用户，因此我们需要先进行用户配置后才能使用 Tomcat Manager。</p>
<h6 id="3-4-4-2-配置-Tomcat-Manager-的访问用户"><a href="#3-4-4-2-配置-Tomcat-Manager-的访问用户" class="headerlink" title="3.4.4.2 配置 Tomcat Manager 的访问用户"></a><strong>3.4.4.2</strong> <strong>配置</strong> <strong>Tomcat Manager</strong> <strong>的访问用户</strong></h6><p>Tomcat Manager 中没有默认用户，我们需要在 tomcat-users.xml 文件配置。TomcatManager 的用户配置需要配置两个部分：角色配置、用户名及密码配置。   </p>
<p>Tomcat Manager中的角色分类</p>
<p>manager-gui 角色： </p>
<p>允许访问 HTML GUI 和状态页面(即 URL 路径为&#x2F;manager&#x2F;html&#x2F;*) </p>
<p>manager-script 角色： </p>
<p>允许访问文本界面和状态页面(即 URL 路径为&#x2F;manager&#x2F;text&#x2F;*) </p>
<p>manager-jmx 角色： </p>
<p>允许访问 JMX 代理和状态页面(即 URL 路径为&#x2F;manager&#x2F;jmxproxy&#x2F;*) </p>
<p>manager- status 角色： </p>
<p>仅允许访问状态页面(即 URL 路径为&#x2F;manager&#x2F;status&#x2F;*)</p>
<p>配置用户及角色：</p>
<role rolename ="admin-gui"/> 

<user username ="tomcat" password ="tomcat" role ="admin-gui" />

<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313194601449.png" alt="image-20220313194601449"></p>
<h3 id="4-Tomcat版本说明"><a href="#4-Tomcat版本说明" class="headerlink" title="4. Tomcat版本说明"></a>4. Tomcat版本说明</h3><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313194715550.png" alt="image-20220313194715550"></p>
<h3 id="5-Tomcat工作原理"><a href="#5-Tomcat工作原理" class="headerlink" title="5.Tomcat工作原理"></a>5.Tomcat工作原理</h3><h4 id="5-1-Tomcat作用"><a href="#5-1-Tomcat作用" class="headerlink" title="5.1 Tomcat作用"></a>5.1 Tomcat作用</h4><p>​		Tomcat是一个能处理请求并产生响应的应用程序。Tomcat实现了JavaEE平台下的一些技术规范，所以我们可以在Tomcat中运行我们所编写的Jsp、Servlet。</p>
<h4 id="5-2-Tomcat运行原理"><a href="#5-2-Tomcat运行原理" class="headerlink" title="5.2 Tomcat运行原理"></a>5.2 Tomcat运行原理</h4><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313200449891.png" alt="image-20220313200449891"></p>
<h3 id="6-Tomcat架构讲解"><a href="#6-Tomcat架构讲解" class="headerlink" title="6. Tomcat架构讲解"></a>6. Tomcat架构讲解</h3><p>6.1 Tomcat架构图</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313200909572.png" alt="image-20220313200909572"></p>
<p>6.2 Tomcat组件</p>
<h5 id="6-2-1-Server组件"><a href="#6-2-1-Server组件" class="headerlink" title="6.2.1 Server组件"></a>6.2.1 Server组件</h5><p>​		启动一个server实例（即一个JVM），它监听在8005端口以接受shutdown命令。Server的定义不能使用同一个端口，这意味着如果在同一个物理机上启动了多个Server实例，必须配置他们使用不同的端口。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Server</span> <span class="attr">port</span>=<span class="string">&quot;8005&quot;</span> <span class="attr">shutdown</span>=<span class="string">&quot;SHUTDOWN&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>port: 接收 shutdown 指令的端口，默认为 8005；</p>
<p>shutdown：发往此 Server 用于实现关闭 tomcat 实例的命令字符串，默认为 SHUTDOWN；</p>
<h5 id="6-2-2-Service组件"><a href="#6-2-2-Service组件" class="headerlink" title="6.2.2 Service组件"></a>6.2.2 Service组件</h5><p>​		Service 主要用于关联一个引擎和与此引擎相关的连接器，每个连接器通过一个特定的 端口和协议接收请求并将其转发至关联的引擎进行处理。困此，Service 要包含一个引擎、一个或多个连接器。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Service</span> <span class="attr">name</span>=<span class="string">&quot;Catalina&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>name：此服务的名称，默认为 Catalina；</p>
<h5 id="6-2-3-Connector组件"><a href="#6-2-3-Connector组件" class="headerlink" title="6.2.3 Connector组件"></a>6.2.3 Connector组件</h5><p>支持处理不同请求的组件，一个引擎可以有一个或多个连接器，以适应多种请求方式。默认只开启了处理理 Http 协议的连接器。如果需要使用其他协议，需要在 Tomcat 中配置该协议的连接器。 </p>
<p>在 Tomcat 中连接器类型通常有 4 种： </p>
<ol>
<li><p>HTTP 连接器 </p>
</li>
<li><p>SSL 连接器 </p>
</li>
<li><p>AJP 1.3 连接器 </p>
</li>
<li><p>proxy 连接器</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">&quot;8888&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;HTTP/1.1&quot;</span> <span class="attr">connectionTimeout</span>=<span class="string">&quot;20000&quot;</span> <span class="attr">redirectPort</span>=<span class="string">&quot;8443&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>port：监听的端口 </p>
<p>protocol：连接器使用的协议，默认为 HTTP&#x2F;1.1; </p>
<p>connectionTimeout：等待客户端发送请求的超时时间，单位为毫秒; </p>
<p>redirectPort：如果某连接器支持的协议是 HTTP，当接收客户端发来的 HTTPS 请求时， </p>
<p>则转发至此属性定义的端口; </p>
<p>maxThreads：支持的最大并发连接数，默认为 200 个;</p>
<h5 id="6-2-4-Engine组件"><a href="#6-2-4-Engine组件" class="headerlink" title="6.2.4 Engine组件"></a>6.2.4 Engine组件</h5><p>​		Engine 是 Servlet 处理器的一个实例，即 servlet 引擎，定义在 server.xml 中的 Service标记中。Engine 需要 defaultHost 属性来为其定义一个接收所有发往非明确定义虚拟主机的请求的 host 组件。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Engine</span> <span class="attr">name</span>=<span class="string">&quot;Catalina&quot;</span> <span class="attr">defaultHost</span>=<span class="string">&quot;localhost&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>name:Engine组件的名称；</p>
<p>defaultHost：Tomcat 支持基于 FQDN(Fully Qualified Domain Name 全限定域名)的虚拟主 机，这些虚拟主机可以通过在 Engine 容器中定义多个不同的 Host 组件来实现；但如果此引 擎的连接器收到一个发往非非明确定义虚拟主机的请求时则需要将此请求发往一个默认的 虚拟主机进行处理，因此，在 Engine 中定义的多个虚拟主机的主机名称中至少要有一个跟 defaultHost 定义的主机名称同名；</p>
<h5 id="6-2-5-Host组件"><a href="#6-2-5-Host组件" class="headerlink" title="6.2.5 Host组件"></a>6.2.5 Host组件</h5><p>​		位于 Engine 容器中用于接收请求并进行相应处理的虚拟主机。通过该容器可以运行 Servlet 或者 JSP 来处理请求。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Host</span> <span class="attr">name</span>=<span class="string">&quot;localhost&quot;</span> <span class="attr">appBase</span>=<span class="string">&quot;webapps&quot;</span> <span class="attr">unpackWARs</span>=<span class="string">&quot;true&quot;</span> <span class="attr">autoDeploy</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>name：虚拟主机的名称，Tomcat 通过在请求 URL 中的域名与 name 中的值匹配，用于查找能够处理该请求的虚拟主机。如果未找到则交给在 Engine 中 defaultHost 指定的主机处理；</p>
<p>appBase：此 Host 的 webapps 目录，即指定存放 web 应用程序的目录的路径； </p>
<p>autoDeploy：在 Tomcat 处于运行状态时放置于 appBase 目录中的应用程序文件是否自 动进行 deploy；默认为 true； </p>
<p>unpackWARs：在启用此 webapps 时是否对 WAR 格式的归档文件先进行展开；默认为 true； </p>
<h5 id="-1"><a href="#-1" class="headerlink" title=""></a></h5><h5 id="6-2-6-Context组件"><a href="#6-2-6-Context组件" class="headerlink" title="6.2.6 Context组件"></a>6.2.6 Context组件</h5><p>Context是Host的子标签，代表指定一个Web应用，它运行在某个指定的虚拟主机（Host）上；每个 Web 应用都是一个 WAR 文件，或文件的目录；</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Context</span> <span class="attr">path</span>=<span class="string">&quot;/test&quot;</span> <span class="attr">docBase</span>=<span class="string">&quot;D:\bjsxt\itbaizhan.war&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>path：context path 既浏览器访问项目的访问路径。 </p>
<p>docBase：相应的 Web 应用程序的存放位置；也可以使用相对路径，起始路径为此 Context所属 Host 中 appBase 定义的路径；</p>
<h4 id="6-3-Tomcat处理请求过程"><a href="#6-3-Tomcat处理请求过程" class="headerlink" title="6.3  Tomcat处理请求过程"></a>6.3  Tomcat处理请求过程</h4><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313204000523.png" alt="image-20220313204000523"></p>
<p>1、用户访问 localhost:8080&#x2F;test&#x2F;index.jsp，请求被发送到 Tomcat，被监听 8080 端口并处理 HTTP&#x2F;1.1 协议的 Connector 获得。 </p>
<p>2、Connector 把该请求交给它所在的 Service 的 Engine 来处理，并等待 Engine 的回应。 </p>
<p>3、Engine 获得请求 localhost&#x2F;test&#x2F;index.jsp，匹配所有的虚拟主机 Host。 </p>
<p>4、Engine 匹配到名为 localhost 的 Host 虚拟主机来处理&#x2F;test&#x2F;index.jsp 请求（即使匹配 </p>
<p>不到会请求交给默认 Host 处理），Host 会根据&#x2F;test 匹配它所拥有的所有的 Context。 </p>
<p>5、匹配到的 Context 获得请求&#x2F;index.jsp。</p>
<p>6、构造 HttpServletRequest 对象和 HttpServletResponse 对象，作为参数调用 JspServlet 的 doGet（）或 doPost（) 执行业务逻辑、数据存储等程序。 </p>
<p>7、Context 把执行完之后的结果通过 HttpServletResponse 对象返回给 Host。 </p>
<p>8、Host 把 HttpServletResponse 返回给 Engine。 </p>
<p>9、Engine 把 HttpServletResponse 对象返回 Connector。 </p>
<p>10、Connector 把 HttpServletResponse 对象返回给客户 Browser。</p>
<h2 id="四、-Servlet技术详解"><a href="#四、-Servlet技术详解" class="headerlink" title="四、 Servlet技术详解"></a>四、 Servlet技术详解</h2><p>Servlet4.0</p>
<h3 id="1-创建第一个Servlet案例"><a href="#1-创建第一个Servlet案例" class="headerlink" title="1.创建第一个Servlet案例"></a>1.创建第一个Servlet案例</h3><h4 id="1-1-创建Servlet"><a href="#1-1-创建Servlet" class="headerlink" title="1.1 创建Servlet"></a>1.1 创建Servlet</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjsxt; </span><br><span class="line"><span class="keyword">import</span> java.io.IOException; </span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter; <span class="keyword">import</span> javax.servlet.ServletException; </span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet; </span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest; </span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123; </span><br><span class="line">	<span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter(); </span><br><span class="line">	out .println(<span class="string">&quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//W3C//DTD HTML 4.01 Transitional//EN\&quot;&gt;&quot;</span>); </span><br><span class="line">	out.println(<span class="string">&quot;&lt;HTML&gt;&quot;</span>); </span><br><span class="line">	out.println(<span class="string">&quot; &lt;HEAD&gt;&lt;TITLE&gt;A Servlet&lt;/TITLE&gt;&lt;/HEAD&gt;&quot;</span>); out.println(<span class="string">&quot; &lt;BODY&gt;&quot;</span>); </span><br><span class="line">	out.println(<span class="string">&quot;&lt;font color=blue&gt;Hello World&lt;/font&gt;&quot;</span>); out.println(<span class="string">&quot; &lt;/BODY&gt;&quot;</span>); </span><br><span class="line">	out.println(<span class="string">&quot;&lt;/HTML&gt;&quot;</span>); </span><br><span class="line">	out.flush(); </span><br><span class="line">	out.close(); &#125; &#125;</span><br></pre></td></tr></table></figure>



<h4 id="1-2-编译Servlet"><a href="#1-2-编译Servlet" class="headerlink" title="1.2 编译Servlet"></a>1.2 编译Servlet</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">E:\&gt;javac -classpath &quot;E:\Tomcat\apache-tomcat-9.0.34\lib\servlet-api.jar&quot; HelloWorld.java</span><br></pre></td></tr></table></figure>



<h4 id="1-3-创建web-xml"><a href="#1-3-创建web-xml" class="headerlink" title="1.3 创建web.xml"></a>1.3 创建web.xml</h4><h5 id="1-3-1-什么是web-xml"><a href="#1-3-1-什么是web-xml" class="headerlink" title="1.3.1 什么是web.xml"></a>1.3.1 什么是web.xml</h5><p>项目的部署描述文件，是 JavaWeb 工程的配置文件，通过 web.xml 文件可以配置 servlet、filter 等技术。Tomcat 启动时会先解析该配置文件获取项目的配置信息。</p>
<h5 id="1-3-2-web-xml-文件中的头信息"><a href="#1-3-2-web-xml-文件中的头信息" class="headerlink" title="1.3.2 web.xml 文件中的头信息"></a><strong>1.3.2 web.xml</strong> <strong>文件中的头信息</strong></h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span> <span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="1-3-3-在-web-xml-文件中配置-Servlet"><a href="#1-3-3-在-web-xml-文件中配置-Servlet" class="headerlink" title="1.3.3 在 web.xml 文件中配置 Servlet"></a><strong>1.3.3</strong> <strong>在</strong> <strong>web.xml</strong> <strong>文件中配置</strong> <strong>Servlet</strong></h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">servlet</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.bjsxt.servlet.HelloWorld<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/helloworld.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h4 id="1-4-部署Servlet"><a href="#1-4-部署Servlet" class="headerlink" title="1.4 部署Servlet"></a>1.4 部署Servlet</h4><h5 id="1-4-1-Web工程目录结构"><a href="#1-4-1-Web工程目录结构" class="headerlink" title="1.4.1 Web工程目录结构"></a>1.4.1 Web工程目录结构</h5><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313222456335.png" alt="image-20220313222456335"></p>
<h4 id="1-5-访问Servlet"><a href="#1-5-访问Servlet" class="headerlink" title="1.5 访问Servlet"></a>1.5 访问Servlet</h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="http://localhost:8888/servletdemo/hello">http://localhost:8888/servletdemo/hello</a></p>
<h4 id="1-6-访问资源测试结果"><a href="#1-6-访问资源测试结果" class="headerlink" title="1.6 访问资源测试结果"></a>1.6 访问资源测试结果</h4><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313222618934.png" alt="image-20220313222618934"></p>
<h3 id="2-Servlet继承结构"><a href="#2-Servlet继承结构" class="headerlink" title="2. Servlet继承结构"></a>2. Servlet继承结构</h3><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313222711601.png" alt="image-20220313222711601"></p>
<h4 id="2-1-Servlet接口"><a href="#2-1-Servlet接口" class="headerlink" title="2.1 Servlet接口"></a>2.1 Servlet接口</h4><p>1.init()，创建 Servlet 对象后立即调用该方法完成其他初始化工作。 </p>
<p>2.service()，处理客户端请求，执行业务操作，利用响应对象响应客户端请求。 </p>
<p>3.destroy()，在销毁 Servlet 对象之前调用该方法，释放资源。 </p>
<p>4.getServletConfig()，ServletConfig 是容器向 servlet 传递参数的载体。 </p>
<p>5.getServletInfo()，获取 servlet 相关信息。</p>
<p>2.2 ServletConfig 接口</p>
<p>Servlet 运行期间，需要一些辅助信息，这些信息可以在 web.xml 文件中，使用一个或多 </p>
<p>个元素，进行配置。当 Tomcat 初始化一个 Servlet 时，会将该 Servlet 的配置信息，封装到 </p>
<p>一个 ServletConfig 对象中，通过调用 init(ServletConfig config)方法，将 ServletConfig 对称传递给 Servlet</p>
<h4 id="2-3-GenericServlet是个抽象类"><a href="#2-3-GenericServlet是个抽象类" class="headerlink" title="2.3 GenericServlet是个抽象类"></a>2.3 GenericServlet是个抽象类</h4><p>GenericServlet 是实现了 Servlet 接口的抽象类。在 GenericServlet 中进一步的定义了Servlet 接口的具体实现，其设计的目的是为了和应用层协议解耦，在 GenericServlet 中包含 一个 Service 抽象方法。我们也可以通过继承 GenericServlet 并实现 Service 方法实现请求的处理 ， 但 是 需 要 将 ServletReuqest 和 ServletResponse 转 为 HttpServletRequest 和HttpServletResponse。</p>
<h4 id="2-4-HttpServlet类"><a href="#2-4-HttpServlet类" class="headerlink" title="2.4 HttpServlet类"></a>2.4 HttpServlet类</h4><p>继承自 GenericServlet. 针对于处理 HTTP 协议的请求所定制。在 HttpServlet 的 service() 方法中已经把 ServletReuqest 和 ServletResponse转为 HttpServletRequest 和HttpServletResponse。 直接使用 HttpServletRequest 和 HttpServletResponse, 不再需要强 转。实际开发中, 直接继承 HttpServlet, 并根据请求方式复写 doXxx() 方法即可。</p>
<h3 id="3-Servlet的生命周期"><a href="#3-Servlet的生命周期" class="headerlink" title="3.Servlet的生命周期"></a>3.Servlet的生命周期</h3><p>Servlet的生命周期是由容器管理的，分别经历三个阶段：</p>
<p>init():初始化</p>
<p>service():服务</p>
<p>destroy():销毁</p>
<p>当客户端浏览器第一次请求 Servlet 时，容器会实例化这个 Servlet，然后调用一次 init </p>
<p>方法，并在新的线程中执行 service 方法处理请求。service 方法执行完毕后容器不会销毁这 </p>
<p>个 Servlet 而是做缓存处理，当客户端浏览器再次请求这个 Servlet 时，容器会从缓存中直接 </p>
<p>找到这个 Servlet 对象，并再一次在新的线程中执行 Service 方法。当容器在销毁 Servlet 之 </p>
<p>前对调用一次 destroy 方法。</p>
<h3 id="4-Servlet处理请求的原理"><a href="#4-Servlet处理请求的原理" class="headerlink" title="4. Servlet处理请求的原理"></a>4. Servlet处理请求的原理</h3><p>当浏览器基于 get 方式请求我们创建 Servlet 时，我们自定义的 Servlet 中的 doGet 方法 会被执行。doGet 方法能够被执行并处理 get 请求的原因是，容器在启动时会解析 web 工程 中 WEB-INF 目录中的 web.xml 文件，在该文件中我们配置了 Servlet 与 URI 的绑定，容器通 过对请求的解析可以获取请求资源的 URI，然后找到与该 URI 绑定的 Servlet 并做实例化处理 (注意：只实例化一次，如果在缓存中能够找到这个 Servlet 就不会再做次实例化处理)。在实 例化时会使用 Servlet 接口类型作为引用类型的定义，并调用一次 init 方法，由于 HttpServlet 中重写了该方法所以最终执行的是 HttpServlet 中 init 方法(HttpServlet 中的 Init 方法是一个空 的方法体)，然后在新的线程中调用 service 方法。由于在 HttpServlet 中重写了 Service 方法 所以最终执行的是 HttpServlet 中的 service 方法。在 service 方法中通过 request.getMethod()获取到请求方式进行判断如果是 Get 方式请求就执行 doGet 方法，如果是 POST 请求就执行 doPost 方法。如果是基于 GET 方式提交的，并且在我们自定义的 Servlet 中又重写了HttpServlet 中的 doGet 方法，那么最终会根据 Java 的多态特性转而执行我们自定义的 Servlet 中的 doGet 方法。</p>
<h3 id="5-Servlet的使用"><a href="#5-Servlet的使用" class="headerlink" title="5. Servlet的使用"></a>5. Servlet的使用</h3><h4 id="5-1-Servlet的作用"><a href="#5-1-Servlet的作用" class="headerlink" title="5.1  Servlet的作用"></a>5.1  Servlet的作用</h4><p> 获取用户提交的数据 </p>
<p> 获取浏览器附加的信息 </p>
<p> 处理数据（访问数据库或调用接口） </p>
<p> 给浏览器产生一个响应 </p>
<p> 在响应中添加附加信息</p>
<h3 id="6-在Idea中开发Servlet"><a href="#6-在Idea中开发Servlet" class="headerlink" title="6 在Idea中开发Servlet"></a>6 在Idea中开发Servlet</h3><h4 id="6-1-在Idea中创建Web工程"><a href="#6-1-在Idea中创建Web工程" class="headerlink" title="6.1 在Idea中创建Web工程"></a>6.1 在Idea中创建Web工程</h4><h5 id="6-1-1-创建项目"><a href="#6-1-1-创建项目" class="headerlink" title="6.1.1  创建项目"></a>6.1.1  创建项目</h5><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313224811380.png" alt="image-20220313224811380"></p>
<h5 id="6-1-2-创建Web工程"><a href="#6-1-2-创建Web工程" class="headerlink" title="6.1.2  创建Web工程"></a>6.1.2  创建Web工程</h5><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313224836126.png" alt="image-20220313224836126"></p>
<h4 id="-2"><a href="#-2" class="headerlink" title=""></a></h4><h5 id="6-1-3-Web工程结构"><a href="#6-1-3-Web工程结构" class="headerlink" title="6.1.3  Web工程结构"></a>6.1.3  Web工程结构</h5><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313224902666.png" alt="image-20220313224902666"></p>
<h5 id="6-1-4-为项目添加servlet-api-jar"><a href="#6-1-4-为项目添加servlet-api-jar" class="headerlink" title="6.1.4  为项目添加servlet-api.jar"></a>6.1.4  为项目添加servlet-api.jar</h5><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313225003765.png" alt="image-20220313225003765"></p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313225015397.png" alt="image-20220313225015397"></p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313225023943.png" alt="image-20220313225023943"></p>
<h5 id="6-1-5-在Idea中配置Tomcat"><a href="#6-1-5-在Idea中配置Tomcat" class="headerlink" title="6.1.5  在Idea中配置Tomcat"></a>6.1.5  在Idea中配置Tomcat</h5><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313225119309.png" alt="image-20220313225119309"></p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313225619581.png" alt="image-20220313225619581"></p>
<h5 id="6-1-6-修改项目的访问路径（Content-Path）"><a href="#6-1-6-修改项目的访问路径（Content-Path）" class="headerlink" title="6.1.6  修改项目的访问路径（Content Path）"></a>6.1.6  修改项目的访问路径（Content Path）</h5><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230126572.png" alt="image-20220313230126572"></p>
<h4 id="6-2-Idea中的web项目部署"><a href="#6-2-Idea中的web项目部署" class="headerlink" title="6.2  Idea中的web项目部署"></a>6.2  Idea中的web项目部署</h4><p>在 Idea 中默认的并不会把 web 项目真正的部署到 Tomcat 的 webapps 目录中，而是通过为每个 web 项目创建一个独立的 Tomcat 副本并在 Tomcat 副本中通过的 Tomcat 的 Context 组件完成项目的目录指定，在 Context 组件的 docBase 属性中会指定 Idea 对 web 项目编译后 的目录 out&#x2F;artifacts&#x2F;…..。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230221944.png" alt="image-20220313230221944"></p>
<h5 id="6-2-1-默认部署方式"><a href="#6-2-1-默认部署方式" class="headerlink" title="6.2.1  默认部署方式"></a>6.2.1  默认部署方式</h5><p>Idea 会在 C:\Users\Administrator.IntelliJIdea2019.2\system\tomcat 中为每个 Web 项目创 建一个独立的 Tomcat 副本。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230409273.png" alt="image-20220313230409273"></p>
<p>C:\Users\Administrator.IntelliJIdea2019.2\system\tomcat\Tomcat_9_0_34_demo_4\conf\Catalina\localhost 目录中生成一个该项目的 xml 文件名称为：”项目名.xml”。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230434204.png" alt="image-20220313230434204"></p>
<p>在 xml 文件中指定 web 项目编译完后的 artifacts 目录的位置。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230453506.png" alt="image-20220313230453506"></p>
<p>Idea 通过执行 Tomcat 的 catalina.bat 启动脚本启动 Tomcat，通过启动参数来指定启动 </p>
<p>Tomcat 副本运行指定目录中的 web 项目</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230516736.png" alt="image-20220313230516736"></p>
<p>Idaa 在启动 Tomcat 之前会先在操作系统中设置一些临时环境变量，这些变量会被 </p>
<p>Tomcat 的启动脚本所读取。 </p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230548922.png" alt="image-20220313230548922"></p>
<p>CATALINA_BASE：是 Tomcat 副本的工作目录 </p>
<p>CATALINA_HOME：是 Tomcat 的安装目录</p>
<p>在 Catalina.bat 启 动 脚 本 运 行 时 ， 会 先 去 判 断 脚 本 中 的 CATALINA_HOME 以 及 CATALINA_BASE 是否有默认值，如果没有则直接读取系统环境变量中的值作为他们的默认 值。由于 Idea 在启动 Tomcat 之前已经设置了临时环境变量，所以 tomcat 在启动后就会运 行部署在 Tomcat 副本中的 web 项目。</p>
<h5 id="6-2-2-将web项目部署到Tomcat的webapps中"><a href="#6-2-2-将web项目部署到Tomcat的webapps中" class="headerlink" title="6.2.2 将web项目部署到Tomcat的webapps中"></a>6.2.2 将web项目部署到Tomcat的webapps中</h5><p>点击项目结构选项，指定输出 artifacts 的目录为 Tomcat 的 webapps 中的 demo 目录。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230816895.png" alt="image-20220313230816895"></p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230828870.png" alt="image-20220313230828870"></p>
<p>启动 Tomcat，查看 demo 目录中的内容。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230842633.png" alt="image-20220313230842633"></p>
<p>在 tomcat 的 webapps 中创建一个目录。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220313230858627.png" alt="image-20220313230858627"></p>
<h3 id="7-HttpServletRequest-对象"><a href="#7-HttpServletRequest-对象" class="headerlink" title="7.  HttpServletRequest 对象"></a>7.  <strong>HttpServletRequest</strong> <strong>对象</strong></h3><p>HttpServletRequest 对象代表客户端浏览器的请求，当客户端浏览器通过 HTTP 协议访问服务器时，HTTP 请求中的所有信息都会被 Tomcat 所解析并封装在这个对象中，通过这个对 象提供的方法，可以获得客户端请求的所有信息。 </p>
<h4 id="7-1-获取请求信息"><a href="#7-1-获取请求信息" class="headerlink" title="7.1 获取请求信息"></a>7.1 获取请求信息</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo1.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">requestURL</span> <span class="operator">=</span> req.getRequestURL();</span><br><span class="line">        <span class="comment">//返回客户端浏览器发出请求时的完整URL</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> req.getRequestURI();</span><br><span class="line">        <span class="comment">//返回请求行中指定资源部分</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">remoteAddr</span> <span class="operator">=</span> req.getRemoteAddr();</span><br><span class="line">        <span class="comment">//返回发出请求的客户机的IP地址</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">localAddr</span> <span class="operator">=</span> req.getLocalAddr();</span><br><span class="line">        <span class="comment">// 返回Web服务器的IP地址</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">localPort</span> <span class="operator">=</span> req.getLocalPort();</span><br><span class="line">        <span class="comment">//返回WEB服务器处理Http协议的连接器所监听的端口</span></span><br><span class="line">        out.println(<span class="string">&quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//W3C//DTD HTML 4.01 Transitional//EN\&quot;&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;HTML&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot; &lt;HEAD&gt;&lt;TITLE&gt;itbz&lt;/TITLE&gt;&lt;/HEAD&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot; &lt;BODY&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;br&gt;&quot;</span>+requestURL+<span class="string">&quot;&lt;/br&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;br&gt;&quot;</span>+requestURI+<span class="string">&quot;&lt;/br&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;br&gt;&quot;</span>+remoteAddr+<span class="string">&quot;&lt;/br&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;br&gt;&quot;</span>+localAddr+<span class="string">&quot;&lt;/br&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;br&gt;&quot;</span>+localPort+<span class="string">&quot;&lt;/br&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        out.println(<span class="string">&quot; &lt;/BODY&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;/HTML&gt;&quot;</span>);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="7-2-获取请求数据"><a href="#7-2-获取请求数据" class="headerlink" title="7.2 获取请求数据"></a>7.2 获取请求数据</h4><h5 id="7-2-1-在Servlet获取请求数据的方式"><a href="#7-2-1-在Servlet获取请求数据的方式" class="headerlink" title="7.2.1 在Servlet获取请求数据的方式"></a>7.2.1 在Servlet获取请求数据的方式</h5><p>req.getParameter(“key”)</p>
<p>根据key获取指定value，返回一个字符串</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;key&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;demo2.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;A&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;B&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ok&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取请求数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo2.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取用户名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        <span class="comment">//获取用户密码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userwpd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.println(<span class="string">&quot;USerName&quot;</span>+username);</span><br><span class="line">        out.println(<span class="string">&quot;USerPwd&quot;</span>+userwpd);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="7-2-2-获取复选框-checkbox组件-中的值"><a href="#7-2-2-获取复选框-checkbox组件-中的值" class="headerlink" title="7.2.2 获取复选框(checkbox组件)中的值"></a>7.2.2 获取复选框(checkbox组件)中的值</h5><p>req.getParameterValues(“checkboxkey”)</p>
<p>获取复选框(checkbox 组件)中的值，返回一个 String[]。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] userlikes = req.getParameterValues(<span class="string">&quot;checkboxkey&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取请求数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo2.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取用户名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        <span class="comment">//获取用户密码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userwpd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        <span class="comment">//获取复选框的值域</span></span><br><span class="line">        String[] userlikes = req.getParameterValues(<span class="string">&quot;userlike&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(userlikes);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.println(<span class="string">&quot;USerName&quot;</span>+username);</span><br><span class="line">        out.println(<span class="string">&quot;USerPwd&quot;</span>+userwpd);</span><br><span class="line">        out.println(<span class="string">&quot;UserLike&quot;</span>+list);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;demo2.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;A&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;B&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户爱好：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userlike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sport&quot;</span>&gt;</span>体育<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userlike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;music&quot;</span>&gt;</span>音乐<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userlike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;music&quot;</span>&gt;</span>音乐<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ok&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="7-2-3-获取所有提交数据的-key"><a href="#7-2-3-获取所有提交数据的-key" class="headerlink" title="7.2.3 获取所有提交数据的 key"></a><strong>7.2.3</strong> <strong>获取所有提交数据的</strong> <strong>key</strong></h5><p>req.getParameterNames() </p>
<p>获取请求中所有数据的 key，该方法返回一个枚举类型。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Enumeration&lt;String&gt; parameterNames = req.getParameterNames(); </span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取请求数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo2.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取用户名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        <span class="comment">//获取用户密码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userwpd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取复选框的值域</span></span><br><span class="line">        String[] userlikes = req.getParameterValues(<span class="string">&quot;userlike&quot;</span>);</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(userlikes);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取表单中的所有的key</span></span><br><span class="line">        Enumeration&lt;String&gt; parameterNames = req.getParameterNames();</span><br><span class="line">        List&lt;String&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (parameterNames.hasMoreElements())</span><br><span class="line">        &#123;</span><br><span class="line">            list1.add(parameterNames.nextElement());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.println(<span class="string">&quot;USerName&quot;</span>+username);</span><br><span class="line">        out.println(<span class="string">&quot;USerPwd&quot;</span>+userwpd);</span><br><span class="line">        out.println(<span class="string">&quot;UserLike&quot;</span>+list);</span><br><span class="line">        out.println(<span class="string">&quot;Names&quot;</span>+list1);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;demo2.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;A&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;B&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户爱好：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userlike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sport&quot;</span>&gt;</span>体育<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userlike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;music&quot;</span>&gt;</span>音乐<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userlike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;music&quot;</span>&gt;</span>音乐<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ok&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="7-2-4-使用-Map-结构获取提交数据"><a href="#7-2-4-使用-Map-结构获取提交数据" class="headerlink" title="7.2.4 使用 Map 结构获取提交数据"></a><strong>7.2.4</strong> <strong>使用</strong> <strong>Map</strong> <strong>结构获取提交数据</strong></h5><p>req.getParameterMap()</p>
<p>获取请求中所有的数据并存放到一个 Map 结构中，该方法返回一个 Map，其中 key 为 String 类型 value 为 String[]类型。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取请求数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo2.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取用户名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        <span class="comment">//获取用户密码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userwpd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取复选框的值域</span></span><br><span class="line">        String[] userlikes = req.getParameterValues(<span class="string">&quot;userlike&quot;</span>);</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(userlikes);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取表单中的所有的key</span></span><br><span class="line">        Enumeration&lt;String&gt; parameterNames = req.getParameterNames();</span><br><span class="line">        List&lt;String&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (parameterNames.hasMoreElements())</span><br><span class="line">        &#123;</span><br><span class="line">            list1.add(parameterNames.nextElement());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用Map结构获取表单提交所有的数据</span></span><br><span class="line">        Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br><span class="line">        Iterator&lt;Map.Entry&lt;String,String[]&gt;&gt; iterator = parameterMap.entrySet().iterator();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.println(<span class="string">&quot;USerName&quot;</span>+username);</span><br><span class="line">        out.println(<span class="string">&quot;USerPwd&quot;</span>+userwpd);</span><br><span class="line">        out.println(<span class="string">&quot;UserLike&quot;</span>+list);</span><br><span class="line">        out.println(<span class="string">&quot;Names&quot;</span>+list1);</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext())</span><br><span class="line">        &#123;</span><br><span class="line">            Map.Entry&lt;String,String[]&gt; entry = iterator.next();</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            String[] value = entry.getValue();</span><br><span class="line">            out.println(key+<span class="string">&quot;=&quot;</span>+Arrays.asList(value));</span><br><span class="line">        &#125;</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;demo2.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;A&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;B&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    用户爱好：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userlike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sport&quot;</span>&gt;</span>体育<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userlike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;music&quot;</span>&gt;</span>音乐<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userlike&quot;</span> <span class="attr">value</span>=<span class="string">&quot;music&quot;</span>&gt;</span>音乐<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ok&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="-3"><a href="#-3" class="headerlink" title=""></a></h4><h4 id="7-3-设置请求编码"><a href="#7-3-设置请求编码" class="headerlink" title="7.3 设置请求编码"></a>7.3 设置请求编码</h4><p>req.setCharacterEncoding(“utf-8”)</p>
<p>​       请求的数据包基于字节在网络上传输，Tomcat 接收到请求的数据包后会将数据包中的 </p>
<p>字节转换为字符。在 Tomcat 中使用的是 <strong>ISO-8859-1</strong> 的单字节编码完成字节与字符的转换， </p>
<p>所以数据中含有中文就会出现乱码，可以通过 req.setCharacterEncoding(“utf-8”)方法来对提 </p>
<p>交的数据根据指定的编码方式重新做编码处理。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取请求数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo2.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//设置请求编码</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取用户名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;A&quot;</span>);</span><br><span class="line"><span class="comment">//        String name = new String(username.getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;);</span></span><br><span class="line"><span class="comment">//        System.out.println(name);</span></span><br><span class="line">        System.out.println(username);</span><br><span class="line">        <span class="comment">//是解决请求当中的乱码，而不是解决响应当中的乱码</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取用户密码</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userwpd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取复选框的值域</span></span><br><span class="line">        String[] userlikes = req.getParameterValues(<span class="string">&quot;userlike&quot;</span>);</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(userlikes);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取表单中的所有的key</span></span><br><span class="line">        Enumeration&lt;String&gt; parameterNames = req.getParameterNames();</span><br><span class="line">        List&lt;String&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (parameterNames.hasMoreElements())</span><br><span class="line">        &#123;</span><br><span class="line">            list1.add(parameterNames.nextElement());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用Map结构获取表单提交所有的数据</span></span><br><span class="line">        Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br><span class="line">        Iterator&lt;Map.Entry&lt;String,String[]&gt;&gt; iterator = parameterMap.entrySet().iterator();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.println(<span class="string">&quot;USerName&quot;</span>+username);</span><br><span class="line">        out.println(<span class="string">&quot;USerPwd&quot;</span>+userwpd);</span><br><span class="line">        out.println(<span class="string">&quot;UserLike&quot;</span>+list);</span><br><span class="line">        out.println(<span class="string">&quot;Names&quot;</span>+list1);</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext())</span><br><span class="line">        &#123;</span><br><span class="line">            Map.Entry&lt;String,String[]&gt; entry = iterator.next();</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            String[] value = entry.getValue();</span><br><span class="line">            out.println(key+<span class="string">&quot;=&quot;</span>+Arrays.asList(value));</span><br><span class="line">        &#125;</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="7-4-资源访问方式"><a href="#7-4-资源访问方式" class="headerlink" title="7.4 资源访问方式"></a>7.4 资源访问方式</h4><h5 id="7-4-1-绝对路径"><a href="#7-4-1-绝对路径" class="headerlink" title="7.4.1 绝对路径"></a>7.4.1 绝对路径</h5><p>绝对路径访问资源表示示直接以”&#x2F;”作为项目的 Content Path。该方式适用于以”&#x2F;”作为项目 </p>
<p>的 Content Path。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/getInfo.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="7-4-2-相对路径"><a href="#7-4-2-相对路径" class="headerlink" title="7.4.2 相对路径"></a>7.4.2 相对路径</h5><p>相对路径访问资源表示会相对于项目的 Content Path 作为相对路径。该方式适用于为项 </p>
<p>目指定的具体的 Content Path。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;getInfo.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220320211959965.png" alt="image-20220320211959965"></p>
<p>上面红箭头所指示的就是Content Path</p>
<h4 id="7-5-获取请求头信息"><a href="#7-5-获取请求头信息" class="headerlink" title="7.5 获取请求头信息"></a>7.5 获取请求头信息</h4><h5 id="7-5-1-获取请求头信息"><a href="#7-5-1-获取请求头信息" class="headerlink" title="7.5.1 获取请求头信息"></a>7.5.1 获取请求头信息</h5><p>req.getHeader(“headerKey”)</p>
<p>根据请求头中的 key 获取对应的 value。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">headerValue</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;headerKey&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>req.getHeaderNames() </p>
<p>获取请求头中所有的 key，该方法返回枚举类型。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Enumeration&lt;String&gt; headerNames = req.getHeaderNames();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取请求头信息</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo3.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取指定的key获取请求头信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">header</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;Accept-Encoding&quot;</span>);</span><br><span class="line">        <span class="comment">//获取请求头中的所有数据</span></span><br><span class="line">        Enumeration&lt;String&gt; headerNames = req.getHeaderNames();</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;Header Info-Accept-Encoding: &quot;</span>+header);</span><br><span class="line">        <span class="keyword">while</span> (headerNames.hasMoreElements())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> headerNames.nextElement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> req.getHeader(key);</span><br><span class="line">            pw.println(key+<span class="string">&quot;: &quot;</span>+value);</span><br><span class="line">        &#125;</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="7-5-2-获取请求头案例"><a href="#7-5-2-获取请求头案例" class="headerlink" title="7.5.2 获取请求头案例"></a>7.5.2 获取请求头案例</h5><p>需求：编写一个 Servlet，如果浏览器的语言是 zh-CN，显示“你好，聪明的中国人！”， 如果浏览器的语言设置为 en-US,那么则显示“Hello，American”。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo4.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">header</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;Accept-Language&quot;</span>);</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="keyword">if</span> (header.startsWith(<span class="string">&quot;zh-CN&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            printWriter.println(<span class="string">&quot;你好,聪明的中国人！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (header.startsWith(<span class="string">&quot;en-US&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            printWriter.println(<span class="string">&quot;hello,dog&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;无法识别&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>





<h4 id="7-6HttpServletRequest对象的生命周期"><a href="#7-6HttpServletRequest对象的生命周期" class="headerlink" title="7.6HttpServletRequest对象的生命周期"></a>7.6HttpServletRequest对象的生命周期</h4><p>当有请求到达 Tomcat 时，Tomcat 会创建 HttpServletRequest 对象，并将该对象通过参数的方式传递到我们 Servlet 的方法中，当处理请求处理完毕并产生响应后该对象生命周期结束</p>
<h3 id="8-HttpServletResponse-对象"><a href="#8-HttpServletResponse-对象" class="headerlink" title="8   HttpServletResponse 对象"></a>8   <strong>HttpServletResponse</strong> <strong>对象</strong></h3><p>HttpServletResponse 对象代表服务器的响应。这个对象中封装了响应客户端浏览器的流对象，以及向客户端浏览器响应的响应头、响应数据、响应状态码等信息。</p>
<h4 id="8-1-设置响应类型"><a href="#8-1-设置响应类型" class="headerlink" title="8.1 设置响应类型"></a>8.1 设置响应类型</h4><p>resp.setContentType(“MIME”) </p>
<p>该方法可通过 MIME-Type 设置响应类型。<img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220321081439345.png" alt="image-20220321081439345"></p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220321081445911.png" alt="image-20220321081445911"></p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220321081452979.png" alt="image-20220321081452979"></p>
<h5 id="8-1-1-设置字符型响应"><a href="#8-1-1-设置字符型响应" class="headerlink" title="8.1.1 设置字符型响应"></a>8.1.1 设置字符型响应</h5><p>常见的字符型响应类型:</p>
<p>resp.setContentType(“text&#x2F;html”)</p>
<p>设置响应类型为文本型，内容含有html字符串，是默认的响应类型</p>
<p>resp.setContentType(“text&#x2F;plain”)</p>
<p>设置响应类型为文本型，内容是普通文本。</p>
<p>resp.setContentType(“application&#x2F;json”) </p>
<p>设置响应类型为 JSON 格式的字符串。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//设置字符响应类型</span></span><br><span class="line">        <span class="comment">//响应文本类型</span></span><br><span class="line"><span class="comment">//        resp.setContentType(&quot;text/plain&quot;);</span></span><br><span class="line">        <span class="comment">//默认的响应类型</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.println(<span class="string">&quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//W3C//DTD HTML 4.01 Transitional//EN\&quot;&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;HTML&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot; &lt;HEAD&gt;&lt;TITLE&gt;itbz&lt;/TITLE&gt;&lt;/HEAD&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot; &lt;BODY&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;font color=blue&gt;HelloWorld&lt;/font&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot; &lt;/BODY&gt;&quot;</span>);</span><br><span class="line">        out.println(<span class="string">&quot;&lt;/HTML&gt;&quot;</span>);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="8-1-2-设置字节型响应"><a href="#8-1-2-设置字节型响应" class="headerlink" title="8.1.2 设置字节型响应"></a>8.1.2 设置字节型响应</h5><p>常见的字节型响应： </p>
<p>resp.setContentType(“image&#x2F;jpeg”) </p>
<p>设置响应类型为图片类型，图片类型为 jpeg 或 jpg 格式。</p>
<p>resp.setContentType(“image&#x2F;gif”) </p>
<p>设置响应类型为图片类型，图片类型为 gif 格式。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//设置字节型相应</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo6.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo6</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//给定读取响应的图片的路径</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:/尚学堂.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//创建读取图片的IO流对象</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="comment">//图片缓冲区</span></span><br><span class="line">        <span class="type">byte</span>[] buff = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">        is.read(buff);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置响应类型</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;image/jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//获取字节输出流对象</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">        outputStream.write(buff);</span><br><span class="line">        outputStream.flush();</span><br><span class="line">        outputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="8-2-设置响应编码"><a href="#8-2-设置响应编码" class="headerlink" title="8.2 设置响应编码"></a>8.2 设置响应编码</h4><p>response.setCharacterEncoding(“utf-8”); </p>
<p>设置服务端为浏览器产生响应的响应编码，服务端会根据此编码将响应内容的字符转换为字节。</p>
<p>当浏览器的显示编码方式不是UTF-8的时候，就会看到乱码，需要手动指定浏览器编码。</p>
<p>response.setContentType(“text&#x2F;html;charset&#x3D;utf-8”); </p>
<p>设置服务端为浏览器产生响应的响应编码，服务端会根据此编码将响应内容的字符转换为字节。同时客户端浏览器会根据此编码方式显示响应内容。</p>
<h4 id="8-3-在响应中添加附加信息"><a href="#8-3-在响应中添加附加信息" class="headerlink" title="8.3 在响应中添加附加信息"></a>8.3 在响应中添加附加信息</h4><h5 id="8-3-1-重定向响应"><a href="#8-3-1-重定向响应" class="headerlink" title="8.3.1 重定向响应"></a>8.3.1 重定向响应</h5><p>response.sendRedirect(URL地址)</p>
<p>重定向响应会在响应头中添加一个 Location 的 key 对应的 value 是给定的 URL。客户端浏览器在解析响应头后自动向 Location 中的 URL 发送请求。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220321084334294.png" alt="image-20220321084334294"></p>
<p>重定向响应特点： </p>
<p><strong>重定向会产生两次请求两次响应。</strong> </p>
<p><strong>重定向的 URL 是由客户端浏览器发送的</strong></p>
<p><strong>浏览器的地址名会有变化</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//c重定向响应</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo7.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo7</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//产生重定向响应</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;https://www.baidu.com/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="8-3-2-重定向响应案例"><a href="#8-3-2-重定向响应案例" class="headerlink" title="8.3.2 重定向响应案例"></a>8.3.2 重定向响应案例</h5><p>需求：创建一个搜索页面，通过百度搜索引擎完成内容搜索</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;demo7.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">搜索:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;search&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//c重定向响应</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo7.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo7</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//设置请求编码</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//获取用户搜索数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">search</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;search&quot;</span>);</span><br><span class="line">        <span class="comment">//产生重定向响应</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=1&amp;tn=baidu&amp;wd=&quot;</span>+ URLEncoder.encode(search,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h5 id="8-3-3文件下载"><a href="#8-3-3文件下载" class="headerlink" title="8.3.3文件下载"></a>8.3.3文件下载</h5><p>在实现文件下载时，我们需要修改响应头，添加附加信息。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename=&quot;</span>+文件名);</span><br></pre></td></tr></table></figure>

<p>Content-Disposition:attachment </p>
<p>该附加信息表示作为对下载文件的一个标识字段。不会在浏览器中显示而是直接做下载处理</p>
<p>filename&#x3D;文件名 </p>
<p>表示指定下载文件的文件名。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//文件下载的Servlet</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo8.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo8</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//读取下载文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:/尚学堂.jpg&quot;</span>);</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="comment">//图片缓冲区</span></span><br><span class="line">        <span class="type">byte</span>[] buff = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">        is.read(buff);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//在相应中添加附加信息</span></span><br><span class="line">        resp.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span>+file.getName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//产生响应</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">        os.write(buff);</span><br><span class="line">        os.flush();</span><br><span class="line">        os.close();</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>



<h5 id="8-3-4-解决文件名中文乱码问题"><a href="#8-3-4-解决文件名中文乱码问题" class="headerlink" title="8.3.4 解决文件名中文乱码问题"></a>8.3.4 解决文件名中文乱码问题</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">resp.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span>+<span class="keyword">new</span> <span class="title class_">String</span>(file.getName().getBytes(<span class="string">&quot;gbk&quot;</span>),<span class="string">&quot;iso-8859-1&quot;</span>));</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//文件下载的Servlet</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo8.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo8</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//读取下载文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;d:/尚学堂.jpg&quot;</span>);</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="comment">//图片缓冲区</span></span><br><span class="line">        <span class="type">byte</span>[] buff = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">        is.read(buff);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//在相应中添加附加信息</span></span><br><span class="line">        resp.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span>+<span class="keyword">new</span> <span class="title class_">String</span>(file.getName().getBytes(<span class="string">&quot;gbk&quot;</span>),<span class="string">&quot;iso-8859-1&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//产生响应</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">        os.write(buff);</span><br><span class="line">        os.flush();</span><br><span class="line">        os.close();</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>



<h3 id="9-ServletContext对象"><a href="#9-ServletContext对象" class="headerlink" title="9  ServletContext对象"></a>9  ServletContext对象</h3><h4 id="9-1-ServletContext对象介绍"><a href="#9-1-ServletContext对象介绍" class="headerlink" title="9.1 ServletContext对象介绍"></a>9.1 ServletContext对象介绍</h4><p>ServletContext官方叫Servlet上下文，服务器会为每一个Web应用创建一个ServletContext对象。这个对象全局唯一，而且Web应用中的所有Servlet都共享这个对象。所以叫做<em><strong>全局应用程序共享对象</strong></em>。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220321101601052.png" alt="image-20220321101601052"></p>
<h4 id="9-2-ServletContext对象的作用"><a href="#9-2-ServletContext对象的作用" class="headerlink" title="9.2 ServletContext对象的作用"></a>9.2 ServletContext对象的作用</h4><p>相对路径转化成绝对路径</p>
<p>获取容器的附加信息</p>
<p>读取配置信息</p>
<p>全局容器</p>
<h4 id="9-3-ServletContext对象的应用"><a href="#9-3-ServletContext对象的应用" class="headerlink" title="9.3 ServletContext对象的应用"></a>9.3 ServletContext对象的应用</h4><h5 id="9-3-1-相对路径转绝对路径"><a href="#9-3-1-相对路径转绝对路径" class="headerlink" title="9.3.1 相对路径转绝对路径"></a>9.3.1 相对路径转绝对路径</h5><p>context.getRealPath(“path”)该方法可以将一个相对路径转换为绝对路径，在文件上传与下载时需要用到该方法做路 径的转换。 </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//文件下载的Servlet</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo8.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo8</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="comment">//路径转换</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;image/尚学堂.jpg&quot;</span>);</span><br><span class="line">        System.out.println(realPath);</span><br><span class="line">        <span class="comment">//读取下载文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(realPath);</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="comment">//图片缓冲区</span></span><br><span class="line">        <span class="type">byte</span>[] buff = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">        is.read(buff);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//在响应中添加附加信息</span></span><br><span class="line">        resp.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span>+<span class="keyword">new</span> <span class="title class_">String</span>(file.getName().getBytes(<span class="string">&quot;gbk&quot;</span>),<span class="string">&quot;iso-8859-1&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//产生响应</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">        os.write(buff);</span><br><span class="line">        os.flush();</span><br><span class="line">        os.close();</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>



<h5 id="9-3-2-获取容器的附加信息"><a href="#9-3-2-获取容器的附加信息" class="headerlink" title="9.3.2 获取容器的附加信息"></a><strong>9.3.2</strong> <strong>获取容器的附加信息</strong></h5><p><strong>servletContext.getServerInfo()</strong> </p>
<p>返回 Servlet 容器的名称和版本号 </p>
<p><strong>servletContext.getMajorVersion()</strong> </p>
<p>返回 Servlet 容器所支持 Servlet 的主版本号。 </p>
<p><strong>servletContext.getMinorVersion()</strong> </p>
<p>返回 Servlet 容器所支持 Servlet 的副版本号。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取容器的附加信息</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo9.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo9</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取容器信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">serverInfo</span> <span class="operator">=</span> servletContext.getServerInfo();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取容器支持Servlet的主版本号</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">majorVersion</span> <span class="operator">=</span> servletContext.getMajorVersion();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取容器支持Servlet的副版本号</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">minorVersion</span> <span class="operator">=</span> servletContext.getMinorVersion();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置响应编码</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/plain;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.println(<span class="string">&quot;容器基本信息:&quot;</span>+serverInfo);</span><br><span class="line">        out.println(<span class="string">&quot;容器支持Servlet的版本号为：&quot;</span>+majorVersion+<span class="string">&quot;.&quot;</span>+minorVersion);</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="9-3-3-获取-web-xml-文件中的信息"><a href="#9-3-3-获取-web-xml-文件中的信息" class="headerlink" title="9.3.3 获取 web.xml 文件中的信息"></a><strong>9.3.3</strong> <strong>获取</strong> <strong>web.xml</strong> <strong>文件中的信息</strong></h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>key<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>value<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>servletContext.getInitParameter(“key”) </p>
<p>该方法可以读取 web.xml 文件中<context-param>标签中的配置信息。 </p>
<p>servletContext.getInitParameterNames() </p>
<p>该方法可以读取 web.xml 文件中所有 param-name 标签中的值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo10.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo10</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="comment">//获取所有的&lt;param-name&gt;的值</span></span><br><span class="line">        Enumeration&lt;String&gt; initParameterNames = servletContext.getInitParameterNames();</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="keyword">while</span> (initParameterNames.hasMoreElements())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> initParameterNames.nextElement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> servletContext.getInitParameter(name);</span><br><span class="line">            pw.println(<span class="string">&quot;Name&quot;</span>+name+<span class="string">&quot;==&quot;</span>+<span class="string">&quot;Value&quot;</span>+value);</span><br><span class="line">        &#125;</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>key1<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>BJSXT<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>key2<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>ITBJ<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="9-3-4-全局容器"><a href="#9-3-4-全局容器" class="headerlink" title="9.3.4 全局容器"></a>9.3.4 全局容器</h5><p>servletContext.setAttribute(“key”,ObjectValue)</p>
<p>向<strong>全局容器</strong>中存放数据</p>
<p>servletContext.getAttribute(“key”) </p>
<p>从<strong>全局容器</strong>中获取数据。 </p>
<p>servletContext.removeAttribute(“key”) </p>
<p>根据 key 删除<strong>全局容器</strong>中的 value。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo11.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo11</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 向ServletContext对象中添加初始化数据</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">       <span class="comment">//获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;BJSXT&quot;</span>);</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;key2&quot;</span>,<span class="string">&quot;ITBZ&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">value1</span> <span class="operator">=</span> (String)servletContext.getAttribute(<span class="string">&quot;key1&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">value2</span> <span class="operator">=</span> (String)servletContext.getAttribute(<span class="string">&quot;key2&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(value1);</span><br><span class="line">        pw.println(value2);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="9-4-ServletContext对象生命周期"><a href="#9-4-ServletContext对象生命周期" class="headerlink" title="9.4 ServletContext对象生命周期"></a>9.4 ServletContext对象生命周期</h4><p>当容器启动时会创建 ServletContext 对象并一直缓存该对象，直到容器关闭后该对象生命周期结束。ServletContext 对象的生命周期非常长，所以在使用全局容器时不建议存放业务数据。</p>
<h3 id="10-ServletConfig对象"><a href="#10-ServletConfig对象" class="headerlink" title="10 ServletConfig对象"></a>10 ServletConfig对象</h3><p>ServletConfig对象对应web.xml文件中的<servlet>节点。当Tomcat初始化一个Servlet时，会将该Servlet的配置信息，封装到一个ServletConfig对象中，我们可以通过该对象读取<servlet>节点中的配置信息</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletName<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servletClass<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>key<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>value<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>servletConfig.getInitParameter(“key”) </p>
<p>该方法可以读取 web.xml 文件中<servlet>标签中<init-param>标签中的配置信息。 </p>
<p>servletConfig.getInitParameterNames() </p>
<p>该方法可以读取 web.xml 文件中当前<servlet>标签中所有<init-param>标签中的值。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo12</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取ServletConfig对象</span></span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取配置信息</span></span><br><span class="line">        Enumeration&lt;String&gt; initParameterNames = servletConfig.getInitParameterNames();</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="keyword">while</span> (initParameterNames.hasMoreElements())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> initParameterNames.nextElement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> servletConfig.getInitParameter(name);</span><br><span class="line">            pw.println(<span class="string">&quot;key:&quot;</span>+name+<span class="string">&quot;====&quot;</span>+<span class="string">&quot;value&quot;</span>+value);</span><br><span class="line">        &#125;</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo12<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.bjsxt.servlet.demo12<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>key1<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>BJSXT<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>key2<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>BJSXTioioioio<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo12<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo12.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="11-Cookie对象与HttpSession对象"><a href="#11-Cookie对象与HttpSession对象" class="headerlink" title="11 Cookie对象与HttpSession对象"></a>11 Cookie对象与HttpSession对象</h3><h3 id="用于维护客户端与服务端的会话状态的维持"><a href="#用于维护客户端与服务端的会话状态的维持" class="headerlink" title="(用于维护客户端与服务端的会话状态的维持)"></a>(用于维护客户端与服务端的会话状态的维持)</h3><p>Cookie 对象与 HttpSession 对象的作用是维护客户端浏览器与服务端的会话状态的两个 对象。由于 HTTP 协议是一个无状态的协议，所以服务端并不会记录当前客户端浏览器的访问状态，但是在有些时候我们是需要服务端能够记录客户端浏览器的访问状态的，如获取当前客户端浏览器的访问服务端的次数时就需要会话状态的维持。在 Servlet 中提供了 Cookie 对象与 HttpSession 对象用于维护客户端与服务端的会话状态的维持。二者不同的是 Cookie是通过客户端浏览器实现会话的维持，而 HttpSession 是通过服务端来实现会话状态的维持</p>
<h4 id="11-1-Cookie对象"><a href="#11-1-Cookie对象" class="headerlink" title="11.1 Cookie对象"></a>11.1 Cookie对象</h4><h5 id="11-1-1-Cookie对象的特点"><a href="#11-1-1-Cookie对象的特点" class="headerlink" title="11.1.1 Cookie对象的特点"></a>11.1.1 Cookie对象的特点</h5><p>Cookie使用字符串存储数据</p>
<p>Cookie使用key与value结构存储数据</p>
<p>单个cookie存储数据大小限制在4097字节</p>
<p>Cookie 存储的数据中不支持中文，Servlet4.0 中支持 </p>
<p> Cookie 是与域名绑定所以不支持跨一级域名访问 </p>
<p>Cookie 对象保存在客户端浏览器或系统磁盘中 </p>
<p>Cookie 分为持久化 Cooke 与状态 Cookie </p>
<p>浏览器在保存同一域名所返回 Cookie 的数量是有限的。不同浏览器支持的数量不同，Chrome 浏览器为 50 个 </p>
<p>浏览器每次请求时都会把与当前访问的域名相关的 Cookie 在请求中提交到服务端。</p>
<h5 id="11-1-2-Cookie对象的创建"><a href="#11-1-2-Cookie对象的创建" class="headerlink" title="11.1.2 Cookie对象的创建"></a>11.1.2 Cookie对象的创建</h5><p>Cookie cookie &#x3D; new Cookie(“key”,”value”);</p>
<p>通过 new 关键字创建 Cookie 对象 </p>
<p>respon.addCookie(cookie)</p>
<p>通过HttpServletResponse对象将Cookie写回到客户端浏览器</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建Cookie对象</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo13.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo13</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//创建Cookie对象</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;ITBZ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将Cookie写回给客户端浏览器</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;Create Cookie&quot;</span>);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="11-1-3-获取Cookie中的数据"><a href="#11-1-3-获取Cookie中的数据" class="headerlink" title="11.1.3 获取Cookie中的数据"></a>11.1.3 获取Cookie中的数据</h5><p>通过HttpServletRequest对象中获取Cookie，返回Cookie数组。</p>
<p>Cookie[] cookies &#x3D; request.getCookies()</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建Cookie对象</span></span><br><span class="line"><span class="comment">//写数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo13.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo13</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//创建Cookie对象</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;ITBZ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将Cookie写回给客户端浏览器</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;Create Cookie&quot;</span>);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//读数据</span></span><br><span class="line"><span class="comment">//获取Cookie中的数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo14.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo14</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取Cookie对象</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取Cookie中的数据</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>;i&lt;cookies.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> cookies[i];</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookie.getName();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue();</span><br><span class="line">            pw.println(<span class="string">&quot;name&quot;</span>+name+<span class="string">&quot;=====&quot;</span>+<span class="string">&quot;value&quot;</span>+value);</span><br><span class="line">        &#125;</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="11-1-4-解决Cookie不支持中文"><a href="#11-1-4-解决Cookie不支持中文" class="headerlink" title="11.1.4  解决Cookie不支持中文"></a>11.1.4  解决Cookie不支持中文</h5><p>在 Servlet4.0 版本之前的 Cookie 中是不支持中文存储的，如果存储的数据中含有中文， 代码会直接出现异常。我们可以通过对含有中文的数据重新进行编码来解决该问题。在 Servlet4.0 中的 Cookie 是支持中文存储的（name的值依然不能使用中文，VALUE值可以使用中文）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">java.lang.IllegalArgumentException: Control character in cookie value or attribute.</span><br></pre></td></tr></table></figure>

<p>URLEncoder.encode(“content”,”code”) </p>
<p>将内容按照指定的编码方式做 URL 编码处理。 </p>
<p>URLDecoder.decode(“content”,”code”) </p>
<p>将内容按照指定的编码方式做 URL 解码处理。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建Cookie对象</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo13.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo13</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">            <span class="comment">//创建Cookie对象</span></span><br><span class="line"><span class="comment">//          Cookie cookie = new Cookie(&quot;key&quot;, &quot;百战程序员&quot;);</span></span><br><span class="line">            <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(URLEncoder.encode(<span class="string">&quot;尚学堂&quot;</span>,<span class="string">&quot;utf-8&quot;</span>), URLEncoder.encode(<span class="string">&quot;百战程序员&quot;</span>,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line"><span class="comment">//          resp.setContentType(&quot;text/plain;charset=utf-8&quot;);</span></span><br><span class="line">            <span class="comment">//将Cookie写回给客户端浏览器</span></span><br><span class="line">            resp.addCookie(cookie);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">            pw.println(<span class="string">&quot;Create Cookie&quot;</span>);</span><br><span class="line">            pw.flush();</span><br><span class="line">         pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//读数据</span></span><br><span class="line"><span class="comment">//获取Cookie中的数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo14.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo14</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取Cookie对象</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取Cookie中的数据</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>;i&lt;cookies.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> cookies[i];</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookie.getName();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue();</span><br><span class="line">            pw.println(<span class="string">&quot;name&quot;</span>+ URLDecoder.decode(name,<span class="string">&quot;utf-8&quot;</span>) +<span class="string">&quot;=====&quot;</span>+<span class="string">&quot;value&quot;</span>+URLDecoder.decode(value,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="11-1-5-Cookie跨域问题"><a href="#11-1-5-Cookie跨域问题" class="headerlink" title="11.1.5 Cookie跨域问题"></a>11.1.5 Cookie跨域问题</h5><p>域名分类：域名分为顶级域、顶级域名(一级域名)、二级域名。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220321220044086.png" alt="image-20220321220044086"></p>
<p>域名等级的区别：一级域名比二级域名更高级，二级域名是依附于一级域名之下的附属 分区域名，即二级域名是一级域名的细化分级。例如：baidu.com 为一级域名，news.baidu.com 为二级域名。Cookie 不支持一级域名的跨域，支持二级域名的跨域。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220321223640535.png" alt="image-20220321223640535"></p>
<h5 id="11-1-6-状态Cookie和持久化Cookie"><a href="#11-1-6-状态Cookie和持久化Cookie" class="headerlink" title="11.1.6 状态Cookie和持久化Cookie"></a>11.1.6 状态Cookie和持久化Cookie</h5><p>状态 Cookie：浏览器会缓存 Cookie 对象。浏览器关闭后 Cookie 对象销毁。</p>
<p>持久化 Cookie：浏览器会对 Cookie 做持久化处理，基于文件形式保存在系统的指定目录中。在 Windows10 系统中为了安全问题不会显示 Cookie 中的内容。 </p>
<p>当 Cookie 对象创建后默认为状态 Cookie。可以使用 Cookie 对象下的 cookie.setMaxAge(60)方法设置失效时间，单位为秒。一旦设置了失效时间，那么该 Cookie 为持久化 Cookie，浏览器会将 Cookie 对象持久化到磁盘中。当失效时间到达后文件删除。 </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Cookie对象</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo13.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo13</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">            <span class="comment">//创建Cookie对象</span></span><br><span class="line">            <span class="comment">//Cookie cookie = new Cookie(&quot;key&quot;, &quot;百战程序员&quot;);</span></span><br><span class="line">            <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(URLEncoder.encode(<span class="string">&quot;尚学堂&quot;</span>,<span class="string">&quot;utf-8&quot;</span>), URLEncoder.encode(<span class="string">&quot;百战程序员&quot;</span>,<span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">            <span class="comment">//resp.setContentType(&quot;text/plain;charset=utf-8&quot;);</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//指定失效时间，一旦指定失效时间，那么该Cookie则为持久化Cookie</span></span><br><span class="line">            cookie.setMaxAge(<span class="number">60</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//将Cookie写回给客户端浏览器</span></span><br><span class="line">            resp.addCookie(cookie);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">            pw.println(<span class="string">&quot;Create Cookie&quot;</span>);</span><br><span class="line">            pw.flush();</span><br><span class="line">         pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="11-1-7-通过Cookie实现客户端与服务端会话的维持-案例"><a href="#11-1-7-通过Cookie实现客户端与服务端会话的维持-案例" class="headerlink" title="11.1.7 通过Cookie实现客户端与服务端会话的维持(案例)"></a>11.1.7 通过Cookie实现客户端与服务端会话的维持(案例)</h5><p>需求：当客户端浏览器第一次访问 Servlet 时返回“您好，欢迎您第一次访问！”，第 二次访问时返回“欢迎您回来！”。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo15.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo15</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取Cookie</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(cookies!=<span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">             <span class="keyword">if</span>(<span class="string">&quot;Welcome&quot;</span>.equals(cookie.getName()))</span><br><span class="line">             &#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">             &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/plain;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">        &#123;</span><br><span class="line">        pw.println(<span class="string">&quot;欢迎您回来！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">        pw.println(<span class="string">&quot;您好,欢迎您第一次访问！&quot;</span>);</span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;Welcome&quot;</span>,<span class="string">&quot;welcome&quot;</span>);</span><br><span class="line">        cookie.setMaxAge(<span class="number">60</span>);</span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="11-1-8-Cookie总结"><a href="#11-1-8-Cookie总结" class="headerlink" title="11.1.8 Cookie总结"></a>11.1.8 Cookie总结</h5><p>Cookie 对于存储内容是基于明文的方式存储的，所以安全性很低。不要在 Cookie 中存 放敏感数据。在数据存储时，虽然在 Servlet4.0 中 Cookie 支持中文，但是建议对 Cookie 中存放的内容做编码处理，也可提高安全性。</p>
<h4 id="11-2-HttpSession对象"><a href="#11-2-HttpSession对象" class="headerlink" title="11.2 HttpSession对象"></a>11.2 HttpSession对象</h4><h5 id="11-2-1-HttpSession对象的特点"><a href="#11-2-1-HttpSession对象的特点" class="headerlink" title="11.2.1 HttpSession对象的特点"></a>11.2.1 HttpSession对象的特点</h5><p>HttpSession 保存在服务端 </p>
<p>HttpSession 可以存储任何类型的数据 </p>
<p>HttpSession 使用 Key 是字符串类型，Value则是Object类型</p>
<p>HttpSession 存储数据大小无限制 </p>
<h5 id="11-2-2-HttpSession对象的创建"><a href="#11-2-2-HttpSession对象的创建" class="headerlink" title="11.2.2 HttpSession对象的创建"></a>11.2.2 HttpSession对象的创建</h5><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322104051719.png" alt="image-20220322104051719"></p>
<p>HttpSession 对象的创建是通过 request.getSession()方法来创建的。客户端浏览器在请求服务端资源时，如果在请求中没有 JSessionID，getSession()方法将会为这个客户端浏览器创 建一个新的 HttpSession 对象，并为这个 HttpSession 对象生成一个 JSessionID，在响应中通过 Cookie 写回给客户端浏览器，如果在请求中包含了 JSessionID，getSession()方法则根据这个ID 返回与这个客户端浏览器对应的 HttpSession 对象。 </p>
<p>getSession()方法还有一个重载方法getSession(true|false)。当参数为true时与getSession()方法作用相同。<em><strong>当参数为 false 时则只去根据 JSessionID 查找是否有与这个客户端浏览器对应的 HttpSession，如果有则返回，如果没有 JSessionID 则不会创建新的 HttpSession 对象。</strong></em> </p>
<p>会为每一个浏览器创建独立的不同的HttpSession对象</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建HttpSession对象</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo16.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo16</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">//创建HttpSession对象</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">true</span>);</span><br><span class="line">        System.out.println(session);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;Create the OK&quot;</span>);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="11-2-3-获取HttpSession中的数据"><a href="#11-2-3-获取HttpSession中的数据" class="headerlink" title="11.2.3 获取HttpSession中的数据"></a>11.2.3 获取HttpSession中的数据</h5><p>session.setAttribute(“key”,value) </p>
<p>将数据存储到 HttpSession 对象中 </p>
<p>Object value &#x3D; session.getAttribute(“key”) </p>
<p>根据 key 获取 HttpSession 中的数据，返回 Object </p>
<p>Enumeration<String> attributeNames &#x3D; session.getAttributeNames() </p>
<p>获取 HttpSession 中所有的 key，返回枚举类型 </p>
<p>session.removeAttribute(“key”) </p>
<p>根据 key 删除 HttpSession 中的数据 </p>
<p>String id &#x3D; session.getId() </p>
<p>根据获取当前 HttpSession 的 SessionID，返回字符串类型 </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建HttpSession对象</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo16.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo16</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">//创建HttpSession对象</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//存储数据</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;ITBZ&quot;</span>);</span><br><span class="line">        <span class="comment">//获取sessionID</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> session.getId();</span><br><span class="line">        System.out.println(session);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;Create the OK&quot;</span>+id);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取HttpSession中的数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo17.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo17</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取HttpSession对象</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="comment">//获取数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span>resp.getWriter();</span><br><span class="line">        printWriter.println(value);</span><br><span class="line">        printWriter.flush();</span><br><span class="line">        printWriter.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="11-2-4-HttpSession的销毁方式"><a href="#11-2-4-HttpSession的销毁方式" class="headerlink" title="11.2.4 HttpSession的销毁方式"></a>11.2.4 HttpSession的销毁方式</h5><p>HttpSession 的销毁方式有两种：</p>
<p>通过 web.xml 文件指定超时时间 </p>
<p>通过 HttpSession 对象中的 invalidate()方法销毁当前 HttpSession 对象 </p>
<p>我们可以在 web.xml 文件中指定 HttpSession 的超时时间，当到达指定的超时时间后，容器就会销该 HttpSession 对象，单位为分钟。该时间对整个 web 项目中的所有 HttpSession 对象有效。时间的计算方式是根据最后一次请求时间作为起始时间。如果有哪个客户端浏览器 对应的 HttpSession 的失效时间已到，那么与该客户端浏览器对应的 HttpSession 对象就会被销毁。其他客户端浏览器对应的 HttpSession 对象会继续保存不会被销毁。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>1<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们也可以在 Tomcat 的 web.xml 文件中配置 HttpSession 的销毁时间。如果在 Tomcat的 web.xml 文件中配置了 HttpSession 的超时时间对应的是 Tomcat 中所有的 Web 项目都有 效。相当于配置了全局的 HttpSession 超时时间。如果我们在 Web 项目中配置了超时时间， 那么会以 Web 项目中的超时时间为准。 </p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220321232823013.png" alt="image-20220321232823013"></p>
<p>invalidate()方法是 HttpSession 对象中所提供的用于销毁当前 HttpSession 的方法。我们通过调用该方法可以销毁当前 HttpSession 对象。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建HttpSession对象</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo16.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo16</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">      <span class="comment">// 获取请求头中的User-Agent的数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">header</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;User-Agent&quot;</span>);</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line"><span class="comment">//        创建HttpSession对象</span></span><br><span class="line"><span class="comment">//         HttpSession session = req.getSession(false);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (header.indexOf(<span class="string">&quot;Chrome&quot;</span>)!=-<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            session.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;Chrome&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            session.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;IE&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//存储数据</span></span><br><span class="line"><span class="comment">//        session.setAttribute(&quot;A&quot;,&quot;ITBZ&quot;);</span></span><br><span class="line">        <span class="comment">//获取sessionID</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> session.getId();</span><br><span class="line">        System.out.println(session);</span><br><span class="line">        System.out.println(header);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;Create the OK&quot;</span>+id);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获取HttpSession中的数据</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo17.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo17</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取HttpSession对象</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="comment">//获取数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">a</span> <span class="operator">=</span>(String)session.getAttribute(<span class="string">&quot;A&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span>resp.getWriter();</span><br><span class="line">        printWriter.println(a);</span><br><span class="line">        printWriter.flush();</span><br><span class="line">        printWriter.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="11-2-5-通过HttpSession实现客户端与服务端会话的维持"><a href="#11-2-5-通过HttpSession实现客户端与服务端会话的维持" class="headerlink" title="11.2.5 通过HttpSession实现客户端与服务端会话的维持"></a>11.2.5 通过HttpSession实现客户端与服务端会话的维持</h5><p>需求：当客户端浏览器第一次访问 Servlet 时返回“您好，欢迎您第一次访问！”，第 二次访问时返回“欢迎您回来！”。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo18.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo18</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//创建HttpSession对象</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(<span class="literal">false</span>);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (session==<span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            req.getSession();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/plain;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="keyword">if</span> (flag)</span><br><span class="line">        &#123;</span><br><span class="line">            pw.println(<span class="string">&quot;欢迎您回来！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            pw.println(<span class="string">&quot;您好，欢迎您第一次访问！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="11-2-6-HttpSession生命周期"><a href="#11-2-6-HttpSession生命周期" class="headerlink" title="11.2.6 HttpSession生命周期"></a>11.2.6 HttpSession生命周期</h5><p>在 HttpSession 对象生命周期中没有固定的创建时间与销毁时间。何时创建取决于我们什么时候第一次调用了 getSession()或 getSession(true)的方法。HttpSession 对象的销毁时间 取决于超时时间的到达以及调用了 invalidate()方法。如果没有超时或者没有调用 invalidate()方法，那么 HttpSession 会一直存储。默认超时时间为 30 分钟(Tomcat 的 web.xml 文件配置的时间就是默认超时时间)。</p>
<h4 id="11-3-HttpSession对象总结"><a href="#11-3-HttpSession对象总结" class="headerlink" title="11.3 HttpSession对象总结"></a>11.3 HttpSession对象总结</h4><h5 id="11-3-1-HttpSession-与-Cookie-的区别："><a href="#11-3-1-HttpSession-与-Cookie-的区别：" class="headerlink" title="11.3.1 HttpSession 与 Cookie 的区别："></a>11.3.1 <strong>HttpSession</strong> <strong>与</strong> <strong>Cookie</strong> <strong>的区别：</strong></h5><p>cookie 数据存放在客户的浏览器或系统的文件中，而 HttpSession 中的数据存放在服务器中。</p>
<p>cookie 不安全，而 HttSession 是安全的。</p>
<p>单个 cookie 保存的数据不能超过 4K，很多浏览器都限制一个域名保存 cookie 的数量。而 HttpSession 没有容量以及数量的限制。 </p>
<h5 id="11-3-2-HttpSession的使用建议"><a href="#11-3-2-HttpSession的使用建议" class="headerlink" title="11.3.2 HttpSession的使用建议"></a>11.3.2 HttpSession的使用建议</h5><h3 id="12-自启动Servlet"><a href="#12-自启动Servlet" class="headerlink" title="12 自启动Servlet"></a>12 自启动Servlet</h3><h4 id="12-1-自启动Servlet特点"><a href="#12-1-自启动Servlet特点" class="headerlink" title="12.1 自启动Servlet特点"></a>12.1 自启动Servlet特点</h4><p>自动启动 Servlet 表示在 Tomcat 启动时就会实例化这个 Servlet，他的实例化过程不依赖 于请求，而是依赖容器的启动</p>
<p>可以通过在 web.xml 中的<servlet>标签中通过<load-on-startup>1</load-on-startup>配置自启动 Servlet。 </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//自启动Servlet</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo19</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;AutoStartServlet......&quot;</span>);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AutoStartServlet Init......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo19<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.bjsxt.servlet.demo19<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo19<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo19.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="12-2-通过自启动Servlet实现配置信息的读取"><a href="#12-2-通过自启动Servlet实现配置信息的读取" class="headerlink" title="12.2 通过自启动Servlet实现配置信息的读取"></a>12.2 通过自启动Servlet实现配置信息的读取</h4><p>需求：修改文件下载案例，通过自启动Servlet读取配置信息</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//文件下载的Servlet</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo8.do&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo8</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取ServletContext对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取存放图片的目录名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> (String)servletContext.getAttribute(<span class="string">&quot;path&quot;</span>);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        <span class="comment">//路径转换</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(value+<span class="string">&quot;/尚学堂.jpg&quot;</span>);</span><br><span class="line">        System.out.println(realPath);</span><br><span class="line">        <span class="comment">//读取下载文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(realPath);</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="comment">//图片缓冲区</span></span><br><span class="line">        <span class="type">byte</span>[] buff = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">        is.read(buff);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//在响应中添加附加信息</span></span><br><span class="line">        resp.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span>+<span class="keyword">new</span> <span class="title class_">String</span>(file.getName().getBytes(<span class="string">&quot;gbk&quot;</span>),<span class="string">&quot;iso-8859-1&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//产生响应</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> resp.getOutputStream();</span><br><span class="line">        os.write(buff);</span><br><span class="line">        os.flush();</span><br><span class="line">        os.close();</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//自启动Servlet</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo19</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;AutoStartServlet......&quot;</span>);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        <span class="comment">//获取Servlet标签中的配置信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取全局容器对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;path&quot;</span>,value);</span><br><span class="line">        System.out.println(<span class="string">&quot;AutoStartServlet Init......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo19<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.bjsxt.servlet.demo19<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>path<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>image<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo19<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo19.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="13-Servlet线程安全问题"><a href="#13-Servlet线程安全问题" class="headerlink" title="13 Servlet线程安全问题"></a>13 Servlet线程安全问题</h3><p>在 Servlet 中使用的是多线程方式来执行 service()方法处理请求，所以我们在使用 Servlet时需要考虑到线程安全问题，在多线程中对于对象中的成员变量是最不安全的，所以不要在 Servlet 中通过成员变量的方式来存放数据，如果一定要使用成员变量存储数据，在对数据进行操作时需要使用线程同步的方式来解决线程安全问题，避免出现数据张冠李戴现象。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//自启动Servlet</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo19</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;AutoStartServlet......&quot;</span>);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        <span class="comment">//获取Servlet标签中的配置信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取全局容器对象</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;path&quot;</span>,value);</span><br><span class="line">        System.out.println(<span class="string">&quot;AutoStartServlet Init......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="14-Servlet的url-pattern配置"><a href="#14-Servlet的url-pattern配置" class="headerlink" title="14 Servlet的url-pattern配置"></a>14 Servlet的url-pattern配置</h3><h4 id="14-1-URL的匹配规则"><a href="#14-1-URL的匹配规则" class="headerlink" title="14.1 URL的匹配规则"></a>14.1 URL的匹配规则</h4><h5 id="14-1-1-精确匹配"><a href="#14-1-1-精确匹配" class="headerlink" title="14.1.1 精确匹配"></a>14.1.1 精确匹配</h5><p>精确匹配是指<url-pattern>中配置的值必须与 url 完全精确匹配</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322200205877.png" alt="image-20220322200205877"></p>
<h5 id="14-1-2-拓展名匹配"><a href="#14-1-2-拓展名匹配" class="headerlink" title="14.1.2. 拓展名匹配"></a>14.1.2. 拓展名匹配</h5><p>在<url-pattern>允许使用通配符“<em>”作为匹配规则，“</em>”表示匹配任意字符。在扩展 名匹配中只要扩展名相同都会被匹配和路径无关。注意，在使用扩展名匹配时在<url-pattern> 中不能使用“&#x2F;”，否则容器启动就会抛出异常。 </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322200321166.png" alt="image-20220322200321166"></p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322200326308.png" alt="image-20220322200326308"></p>
<h5 id="14-1-3-路径匹配"><a href="#14-1-3-路径匹配" class="headerlink" title="14.1.3 路径匹配"></a>14.1.3 路径匹配</h5><p>根据请求路径进行匹配，在请求中只要包含该路径都匹配。“*”表示任意路径以及子 路径</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/suibian/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322200416938.png" alt="image-20220322200416938"></p>
<h5 id="14-1-4-任意匹配"><a href="#14-1-4-任意匹配" class="headerlink" title="14.1.4 任意匹配"></a>14.1.4 任意匹配</h5><p>匹配“&#x2F;”。匹配所有但不包含 JSP 页面 </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322200500903.png" alt="image-20220322200500903"></p>
<p>匹配所有</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322200533203.png" alt="image-20220322200533203"></p>
<h5 id="14-1-5-优先顺序"><a href="#14-1-5-优先顺序" class="headerlink" title="14.1.5 优先顺序"></a>14.1.5 优先顺序</h5><p>当一个 url 与多个 Servlet 的匹配规则可以匹配时，则按照 “ 精确路径 &gt; 最长路径 &gt; 扩展名”这样的优先级匹配到对应的 Servlet。</p>
<h5 id="14-1-6-考考你"><a href="#14-1-6-考考你" class="headerlink" title="14.1.6 考考你"></a>14.1.6 考考你</h5><p>Servlet1 映射到 &#x2F;abc&#x2F;* </p>
<p>Servlet2 映射到 &#x2F;* </p>
<p>Servlet3 映射到 &#x2F;abc </p>
<p>Servlet4 映射到 *.do </p>
<p>当请求 URL 为“&#x2F;abc&#x2F;a.html”，“&#x2F;abc&#x2F;*”和“&#x2F;*”都匹配，Servlet 引擎将调用 Servlet1。 </p>
<p>当请求 URL 为“&#x2F;abc”时，“&#x2F;abc&#x2F;*”和“&#x2F;abc”都匹配，Servlet 引擎将调用 Servlet3。 </p>
<p>当请求 URL 为“&#x2F;abc&#x2F;a.do”时，“&#x2F;abc&#x2F;<em>”和“</em>.do”都匹配，Servlet 引擎将调用 Servlet1。 </p>
<p>当请求 URL 为“&#x2F;a.do”时，“&#x2F;<em>”和“</em>.do”都匹配，Servlet 引擎将调用 Servlet2。 </p>
<p>当请求 URL 为“&#x2F;xxx&#x2F;yyy&#x2F;a.do”时，“&#x2F;<em>”和“</em>.do”都匹配，Servlet 引擎将调用 Servlet2。 </p>
<h4 id="14-2-URL映射方式"><a href="#14-2-URL映射方式" class="headerlink" title="14.2 URL映射方式"></a>14.2 URL映射方式</h4><p>在 web.xml 文件中支持将多个 URL 映射到一个 Servlet 中，但是相同的 URL 不能同时映射到两个 Servlet 中。</p>
<h5 id="14-2-1-方式一"><a href="#14-2-1-方式一" class="headerlink" title="14.2.1 方式一"></a>14.2.1 方式一</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/suibian/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="14-2-2-方式二"><a href="#14-2-2-方式二" class="headerlink" title="14.2.2 方式二"></a>14.2.2 方式二</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/suibian/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demoServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="15-基本注解式开发Servlet"><a href="#15-基本注解式开发Servlet" class="headerlink" title="15 基本注解式开发Servlet"></a>15 基本注解式开发Servlet</h3><p>在 Servlet3.0 以及之后的版本中支持注解式开发 Servlet。对于 Servlet 的配置不在依赖于web.xml 配置文件，而是使用@WebServlet 注解完成 Servlet 的配置。 </p>
<h4 id="15-1-WebServlet-注解中属性"><a href="#15-1-WebServlet-注解中属性" class="headerlink" title="15.1@WebServlet 注解中属性"></a>15.1@WebServlet <strong>注解中属性</strong></h4><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322224220627.png" alt="image-20220322224220627"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//基于注解方式开发servlet</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &#123;&quot;*.do&quot;,&quot;/ann/*&quot;,&quot;/ann.do&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">demo21</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;Annotation Servlet!&quot;</span>);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="15-2-WebInitParam-注解中的属性"><a href="#15-2-WebInitParam-注解中的属性" class="headerlink" title="15.2@WebInitParam 注解中的属性"></a><strong>15.2@WebInitParam</strong> <strong>注解中的属性</strong></h4><p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322224254757.png" alt="image-20220322224254757"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//配置初始化参数</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/initParam.do&quot;,initParams = &#123;@WebInitParam(name = &quot;key1&quot;,value = &quot;BJSXT&quot;),@WebInitParam(name=&quot;key2&quot;,value = &quot;ITB&quot;)&#125;,loadOnStartup = 1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InitParamServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取ServletConfig对象</span></span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        <span class="type">String</span> <span class="variable">key1</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;key1&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">key2</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;key2&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(key1);</span><br><span class="line">        pw.println(key2);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">//获取ServletConfig对象</span></span><br><span class="line">        <span class="type">ServletConfig</span> <span class="variable">servletConfig</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        <span class="type">String</span> <span class="variable">key1</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;key1&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">key2</span> <span class="operator">=</span> servletConfig.getInitParameter(<span class="string">&quot;key2&quot;</span>);</span><br><span class="line">        System.out.println(key1);</span><br><span class="line">        System.out.println(key2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="16-文件上传"><a href="#16-文件上传" class="headerlink" title="16  文件上传"></a>16  文件上传</h3><p>在 Servlet3.0 之前的版本中如果实现文件上传需要依赖 apache 的 Fileupload 组件，在Servlet3.0 以及之后的版本中提供了 Part 对象处理文件上传，所以不在需要额外的添加 Fileupload 组件。 在 Servlet3.0 以及之后的版本中实现文件上传时必须要在 Servlet 中开启多参数配置：web.xml </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">multipart-config</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">file-size-threshold</span>&gt;</span><span class="tag">&lt;/<span class="name">file-size-threshold</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">location</span>&gt;</span><span class="tag">&lt;/<span class="name">location</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">max-file-size</span>&gt;</span><span class="tag">&lt;/<span class="name">max-file-size</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">max-request-size</span>&gt;</span><span class="tag">&lt;/<span class="name">max-request-size</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">multipart-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322232848439.png" alt="image-20220322232848439"></p>
<p>Part对象中常用的方法</p>
<p>String getContentType()</p>
<p>获取上传文件的文件的MIME类型</p>
<p>long getSize()</p>
<p>上传文件的大小</p>
<p>String getSubmittedFileName()</p>
<p>上传文件的原始文件名</p>
<p>String getName()</p>
<p>获取&lt;input name&#x3D;”upload” …&gt;标签中 name 属性值</p>
<p>String getHeader(String name) </p>
<p>获取请求头部 </p>
<p>void write(String path)</p>
<p>保存文件至服务器</p>
<p>InputStream getInputStream()</p>
<p>获取上传文件的输入流</p>
<p>Collection(String)  getHeaderNames()</p>
<p>获取所有请求头部名称</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;fileupload.do&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    文件描述:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;desc&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    上传文件:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;OK&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//文件上传</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/fileupload.do&quot;)</span></span><br><span class="line"><span class="meta">@MultipartConfig</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUploadServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//获取文件描述</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">desc</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;desc&quot;</span>);</span><br><span class="line">        <span class="comment">//获取上传文件</span></span><br><span class="line">        <span class="type">Part</span> <span class="variable">part</span> <span class="operator">=</span> req.getPart(<span class="string">&quot;file&quot;</span>);</span><br><span class="line">        <span class="comment">//处理文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">newName</span> <span class="operator">=</span>UUID.randomUUID().toString()+part.getSubmittedFileName().substring(part.getSubmittedFileName().lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">        <span class="comment">//路径转换</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;image/&quot;</span> + newName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//文件的保存</span></span><br><span class="line">        System.out.println(realPath);</span><br><span class="line">        part.write(realPath);</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/plain;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        pw.println(desc);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>tips:</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220323101706891.png" alt="image-20220323101706891"></p>
<p><em><strong>html等文件应创建在web文件夹下，而不是创建在WEB-INF文件夹下。在错误的文件夹下创建html等文件会造成Tomcat可以正常访问servlet，但不能正常访问html页面的结果</strong></em></p>
<h3 id="17-Filter过滤器"><a href="#17-Filter过滤器" class="headerlink" title="17 Filter过滤器"></a>17 Filter过滤器</h3><p>Filter过滤器是Servlet中的一个组件。并不是JavaEE平台中的技术规范。</p>
<h4 id="17-1-过滤器作用"><a href="#17-1-过滤器作用" class="headerlink" title="17.1 过滤器作用"></a>17.1 过滤器作用</h4><p>对从客户端向服务器端发送的请求进行过滤，也可以对服务器端返回的响应进行处理。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322233655407.png" alt="image-20220322233655407"></p>
<h4 id="17-2-Filter的使用"><a href="#17-2-Filter的使用" class="headerlink" title="17.2 Filter的使用"></a>17.2 Filter的使用</h4><h5 id="17-2-1-Filter对象的创建"><a href="#17-2-1-Filter对象的创建" class="headerlink" title="17.2.1 Filter对象的创建"></a>17.2.1 Filter对象的创建</h5><p>创建一个 Class 实现 Filter 接口，并实现接口中三个抽象方法。 </p>
<p>init()方法：初始化方法，在创建 Filter 后立即调用。可用于完成初始化动作。 </p>
<p>doFilter()方法：拦截请求与响应方法，可用于对请求和响应实现预处理。 </p>
<p>destroy()方法：销毁方法，在销毁 Filter 之前自动调用。可用于完成资源释放等动作。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//第一个Filter案例</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/suibian/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FirstFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="comment">//当Filter对象被实例化后，会立刻调用的一个方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Init........&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//过滤请求与响应的，当客户端浏览器请求的URL与Filter所定义的</span></span><br><span class="line">    <span class="comment">//url-pattern所匹配，那么该请求会被过滤</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">//对请求进行处理</span></span><br><span class="line">        System.out.println(<span class="string">&quot;请求被过滤&quot;</span>);</span><br><span class="line">        <span class="comment">//对请求做放行处理</span></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//对响应进行处理</span></span><br><span class="line">        System.out.println(<span class="string">&quot;响应被过滤&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当Filter对象在销毁之前会调用一次该方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="17-2-2-在Filter中设置请求编码"><a href="#17-2-2-在Filter中设置请求编码" class="headerlink" title="17.2.2 在Filter中设置请求编码"></a>17.2.2 在Filter中设置请求编码</h5><p>需求：在 Filter 中实现对请求的编码的设置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//设置请求编码过滤器</span></span><br><span class="line"><span class="meta">@WebFilter(&quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">//设置请求编码</span></span><br><span class="line">        servletRequest.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">       <span class="comment">//不建议设置响应型编码</span></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="17-2-3"><a href="#17-2-3" class="headerlink" title="17.2.3"></a>17.2.3</h5><p>FilterConfig 对象是用来读取<filter>中<init-param>初始化参数的对象。该对象通过参数传递到 init 方法中，用于读取初始化参数。 </p>
<p>filterConfig.getInitParameter(“name”) </p>
<p>通过 name 获取对应的 value。 </p>
<p>filterConfig.getInitParameterNames() </p>
<p>返回该 Filter 中所有<param-name>中的值。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//设置请求编码过滤器</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/*&quot;,initParams = &#123;@WebInitParam(name=&quot;code&quot;,value = &quot;utf-8&quot;)&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">   <span class="comment">//设置默认编码</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">defaultCode</span> <span class="operator">=</span> <span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> filterConfig.getInitParameter(<span class="string">&quot;code&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(code!=<span class="literal">null</span>&amp;&amp;code.length()&gt;<span class="number">0</span>)</span><br><span class="line">        &#123; <span class="built_in">this</span>.defaultCode = code; &#125; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">//设置请求编码</span></span><br><span class="line">        servletRequest.setCharacterEncoding(<span class="built_in">this</span>.defaultCode);</span><br><span class="line">       <span class="comment">//不建议设置响应型编码</span></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="17-3-FilterChain-过滤器链"><a href="#17-3-FilterChain-过滤器链" class="headerlink" title="17.3 FilterChain(过滤器链)"></a>17.3 FilterChain(过滤器链)</h4><p>Filter 技术的特点是在对请求或响应做预处理时，可实现“插拔式”的程序设计。我们可以根据自己需求添加多个 Filter，也可以根据需求去掉某个 Filter，通过修改 web.xml 文件 即可实现。那么如果有多个过滤器对某个请求及响应进行过滤，那么这组过滤器就称为过滤 器链。过滤器的执行顺序和<url-pattern>有关。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322233920227.png" alt="image-20220322233920227"></p>
<p><strong>Filter 执行顺序则按照在 web.xml 文件中配置的上下顺序来决定先后。在上的先执行，在下的后执行。</strong></p>
<h4 id="17-4-Filter的生命周期"><a href="#17-4-Filter的生命周期" class="headerlink" title="17.4 Filter的生命周期"></a>17.4 Filter的生命周期</h4><p>Filter 的生命周期是由容器管理的。当容器启动时会实例化 Filter 并调用 init 方法完成初始化动作。当客户端浏览器发送请求时，容器会启动一个新的线程来处理请求，如果请求的URI 能够被过滤器所匹配，那么则先调用过滤器中 的 doFilter 方法，再根据是否有chain.doFilter 的指令，决定是否继续请求目标资源。当容器关闭时会销毁 Filter 对象，在销 毁之前会调用 destroy 方法。</p>
<h4 id="17-5-基于注解式开发Filter"><a href="#17-5-基于注解式开发Filter" class="headerlink" title="17.5 基于注解式开发Filter"></a>17.5 基于注解式开发Filter</h4><p>Filter 支持注解式开发，通过@WebFilter 注解替代 web.xml 中 Filter 的配置。</p>
<p><img src="C:\Users\LZH\AppData\Roaming\Typora\typora-user-images\image-20220322234856098.png" alt="image-20220322234856098"></p>
<p><strong>使用注解式开发 Filter 时，执行顺序会根据 Filter 的名称进行排序的结果决定调用的顺序。</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//基于注解式开发Filter</span></span><br><span class="line"><span class="comment">//web.xml里配置的filter优先级高于注解式配置的filter</span></span><br><span class="line"><span class="meta">@WebFilter(&quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Annotation Filter.....&quot;</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="18-Listener-监听器"><a href="#18-Listener-监听器" class="headerlink" title="18 Listener 监听器"></a>18 Listener 监听器</h3><p>监听器用于监听web应用中某些对象的创建、销毁、增加、修改、删除等动作的发生，然后做出相应的响应处理。当范围对象的状态发生变化的时候，服务器会自动调用监听器对象中的方法。 </p>
<h4 id="18-1-监听器分类"><a href="#18-1-监听器分类" class="headerlink" title="18.1 监听器分类"></a>18.1 监听器分类</h4><p>按监听的对象划分，可以分为： </p>
<p>ServletContext 对象生命周期监听器与属性操作监听器 </p>
<p>HttpSession 对象生命周期监听器与属性操作监听器 </p>
<p> ServletRequest 对象生命周期监听器与属性操作监听器 </p>
<h4 id="18-2-ServletContext-监听器"><a href="#18-2-ServletContext-监听器" class="headerlink" title="18.2 ServletContext 监听器"></a>18.2 <strong>ServletContext</strong> <strong>监听器</strong></h4><h5 id="18-2-1-ServletContext-对象的生命周期监听器"><a href="#18-2-1-ServletContext-对象的生命周期监听器" class="headerlink" title="18.2.1 ServletContext 对象的生命周期监听器"></a>18.2.1 <strong>ServletContext</strong> <strong>对象的生命周期监听器</strong></h5><p>ServletContextListener 接口定义了 ServletContext 对象生命周期的监听行为。 </p>
<p>void contextInitialized(ServletContextEvent sce) </p>
<p>ServletContext 对象创建后会触发该监听方法，并将 ServletContext 对象传递到该方法中。</p>
<p>void contextDestroyed(ServletContextEvent sce) </p>
<p>ServletContext 对象在销毁之前会触发该监听方法，并将 ServletContext 对象传递到该方法中</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ServletContext对象生命周期监听器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextLifecycleListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">    <span class="comment">//监听servletcontext对象创建的监听方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">sc</span> <span class="operator">=</span> sce.getServletContext();</span><br><span class="line">        System.out.println(sc);</span><br><span class="line">        System.out.println(<span class="string">&quot;ServletContext Init.......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//监听servletcontext对象销毁的监听方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">sc</span> <span class="operator">=</span> sce.getServletContext();</span><br><span class="line">        System.out.println(sc);</span><br><span class="line">        System.out.println(<span class="string">&quot;ServletContext Destroy.......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.bjsxt.listener.ServletContextLifecycleListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="18-2-2-ServletContext对象的属性操作监听器"><a href="#18-2-2-ServletContext对象的属性操作监听器" class="headerlink" title="18.2.2 ServletContext对象的属性操作监听器"></a>18.2.2 ServletContext对象的属性操作监听器</h5><p>ServletContextAttributeListener 接口定义了对于 ServletContext 对象属性操作的监听行为。</p>
<p>void attributeAdded(ServletContextAttributeEvent scae) </p>
<p>向 ServletContext 对象中添加属性时会触发该监听方法，并将 ServletContext 对象传递到该方法中。触发事件的方法 servletContext.setAttribute(“key”,”value”)。 </p>
<p>void attributeRemoved(ServletContextAttributeEvent scae) </p>
<p>当从 ServletContext 对象中删除属性时会触发该监听方法，并将 ServletContext 对象传递 到该方法中。触发事件方法 servletContext.removeAttribute(“key”)。 </p>
<p>void attributeReplaced(ServletContextAttributeEvent scae) </p>
<p>当从 ServletContext 对象中属性的值发生替换时会触发该监听方法，并将 ServletContext 对象传递到该方法中。触发事件的方法servletContext.setAttribute(“key”,”value”)。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//servletcontext属性操作监听器</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextAttrListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextAttributeListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeAdded</span><span class="params">(ServletContextAttributeEvent scae)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;---------Start--Added-----------------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name:&quot;</span>+scae.getName()+<span class="string">&quot;Value:&quot;</span>+scae.getValue());</span><br><span class="line">        System.out.println(scae.getServletContext());</span><br><span class="line">        System.out.println(<span class="string">&quot;---------End--Added-----------------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeRemoved</span><span class="params">(ServletContextAttributeEvent scae)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;---------Start--Removed-----------------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name:&quot;</span>+scae.getName()+<span class="string">&quot;Value:&quot;</span>+scae.getValue());</span><br><span class="line">        System.out.println(scae.getServletContext());</span><br><span class="line">        System.out.println(<span class="string">&quot;---------End--Removed-----------------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeReplaced</span><span class="params">(ServletContextAttributeEvent scae)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;---------Start--Replaced-----------------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name:&quot;</span>+scae.getName()+<span class="string">&quot;Value:&quot;</span>+scae.getValue());</span><br><span class="line">        System.out.println(scae.getServletContext());</span><br><span class="line">        System.out.println(<span class="string">&quot;---------End--Replaced-----------------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ServletContext属性监听器测试Servlet</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/attr.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextAttr</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;BJSXT&quot;</span>);</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;ITBZ&quot;</span>);</span><br><span class="line">        servletContext.removeAttribute(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.bjsxt.listener.ServletContextAttrListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="18-3-HttpSession-监听器"><a href="#18-3-HttpSession-监听器" class="headerlink" title="18.3  HttpSession 监听器"></a>18.3  <strong>HttpSession</strong> <strong>监听器</strong></h4><h5 id="18-3-1HttpSession-对象的生命周期监听器"><a href="#18-3-1HttpSession-对象的生命周期监听器" class="headerlink" title="18.3.1HttpSession 对象的生命周期监听器"></a>18.3.1<strong>HttpSession</strong> <strong>对象的生命周期监听器</strong></h5><p>HttpSessionListener 接口定义了 HttpSession 对象生命周期的监听行为。 </p>
<p>void sessionCreated(HttpSessionEvent se) </p>
<p>HttpSession 对象创建后会触发该监听方法，并将已创建 HttpSession 对象传递到该方法中。</p>
<p>void sessionDestroyed(HttpSessionEvent se) </p>
<p>HttpSession 对象在销毁之前会触发该监听方法，并将要销毁的 HttpSession 对象传递到 该方法中</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//监听HttpSession生命周期的监听器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpSessionLifecycleListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;sessionCreated&quot;</span>);</span><br><span class="line">        System.out.println(se.getSession());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;sessionDestroyed&quot;</span>);</span><br><span class="line">        System.out.println(se.getSession());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.bjsxt.listener.HttpSessionLifecycleListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="18-3-2-HttpSession-对象的属性操作监听器"><a href="#18-3-2-HttpSession-对象的属性操作监听器" class="headerlink" title="18.3.2 HttpSession 对象的属性操作监听器"></a>18.3.2 <strong>HttpSession</strong> <strong>对象的属性操作监听器</strong></h5><p>HttpSessionAttributeListener 接口定义了对于 HttpSession 对象属性操作的监听行为。 </p>
<p>void attributeAdded(HttpSessionBindingEvent se) </p>
<p>向 HttpSession 对象中添加属性时会触发该监听方法，并将 HttpSession 对象传递到该方法中。触发事件的方法 HttpSession.setAttribute(“key”,”value”)。 </p>
<p>void attributeRemoved(HttpSessionBindingEvent se) </p>
<p>当从 HttpSession 对象中删除属性时会触发该监听方法，并将 HttpSession 对象传递到该方法中。触发事件方法 HttpSession.removeAttribute(“key”)。 </p>
<p>void attributeReplaced(HttpSessionBindingEvent se) </p>
<p>当从 HttpSession 对象中属性的值发生替换时会触发该监听方法，并将 HttpSession 对象传递到该方法中。触发事件的方法 HttpSession.setAttribute(“key”,”value”)。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//测试HttpSession属性监听器</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/attra.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpSessionAttr</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取HttpSession对象</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;BJSXT&quot;</span>);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;itbz&quot;</span>);</span><br><span class="line">        session.removeAttribute(<span class="string">&quot;key&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//HttpSession对象属性监听器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpSessionAttrListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionAttributeListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeAdded</span><span class="params">(HttpSessionBindingEvent se)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpSessionAttrListener------Start Added------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name:&quot;</span>+se.getName()+<span class="string">&quot;vallue:&quot;</span>+se.getValue());</span><br><span class="line">        System.out.println(se.getSession());</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpSessionAttrListener------End Added------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeRemoved</span><span class="params">(HttpSessionBindingEvent se)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpSessionAttrListener------Start Removed------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name:&quot;</span>+se.getName()+<span class="string">&quot;vallue:&quot;</span>+se.getValue());</span><br><span class="line">        System.out.println(se.getSession());</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpSessionAttrListener------End Removed------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeReplaced</span><span class="params">(HttpSessionBindingEvent se)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpSessionAttrListener------Start Replaced-----&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name:&quot;</span>+se.getName()+<span class="string">&quot;vallue:&quot;</span>+se.getValue());</span><br><span class="line">        System.out.println(se.getSession());</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpSessionAttrListener------End Replaced------&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.bjsxt.listener.HttpSessionAttrListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="18-4-HttpServletRequest-监听器"><a href="#18-4-HttpServletRequest-监听器" class="headerlink" title="18.4 HttpServletRequest 监听器"></a>18.4 <strong>HttpServletRequest</strong> <strong>监听器</strong></h4><h5 id="18-4-1-HttpServletRequest-对象的生命周期监听器"><a href="#18-4-1-HttpServletRequest-对象的生命周期监听器" class="headerlink" title="18.4.1 HttpServletRequest 对象的生命周期监听器"></a>18.4.1 <strong>HttpServletRequest</strong> <strong>对象的生命周期监听器</strong></h5><p>ServletRequestListener 接口定义了 ServletReqest(是 HttpServletRequest 接口的父接口类型)对象生命周期的监听行为。 </p>
<p>void requestInitialized(ServletRequestEvent sre) </p>
<p>HttpServletRequest 对象创建后会触发该监听方法，并将已创建 ServletRequest 对象传递到该方法中。 </p>
<p>void requestDestroyed(ServletRequestEvent sre) </p>
<p>HttpServletRequest 对象在销毁之前会触发该监听方法，并将要销毁的 ServletRequest 对 象传递到该方法中。 </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//HttpServletRequest生命周期监听器</span></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpServletRequestLifecycleListener</span> <span class="keyword">implements</span> <span class="title class_">ServletRequestListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestDestroyed</span><span class="params">(ServletRequestEvent sre)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Destroyed Request Started========&quot;</span>);</span><br><span class="line">        System.out.println(sre.getServletRequest());</span><br><span class="line">        System.out.println(<span class="string">&quot;Destroyed Request Ended========&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestInitialized</span><span class="params">(ServletRequestEvent sre)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Initialized Request Started========&quot;</span>);</span><br><span class="line">        System.out.println(sre.getServletRequest());</span><br><span class="line">        System.out.println(<span class="string">&quot;Initialized Request Ended========&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="18-4-2-HttpServletRequest-对象的属性操作监听器"><a href="#18-4-2-HttpServletRequest-对象的属性操作监听器" class="headerlink" title="18.4.2  HttpServletRequest 对象的属性操作监听器"></a>18.4.2  <strong>HttpServletRequest</strong> <strong>对象的属性操作监听器</strong></h5><p>ServletRequestAttributeListener 接口定义了对于 HttpServletRequest 对象属性操作的监听行为。</p>
<p>void attributeAdded(ServletRequestAttributeEvent srae) 向 HttpServletRequest 对象中添加属性时会触发该监听方法，并将 ServletRequest 对象传递到该方法中。触发事件的方法HttpServletRequest.setAttribute(“key”,”value”)。 </p>
<p>void attributeRemoved(ServletRequestAttributeEvent srae) 当从HttpServletRequest 对象中删除属性时会触发该监听方法，并将 ServletRequest 对象 传递到该方法中。触发事件方法 HttpServletRequest.removeAttribute(“key”)。 </p>
<p>void attributeReplaced(ServletRequestAttributeEvent srae) 当 从HttpServletRequest 对 象 中 属 性 的 值 发 生 替 换 时 会 触 发 该 监 听 方 法 ， 并 将 ServletRequest 对象传递到该方法中。 触发事件的方法 HttpServletRequest.setAttribute(“key”,”value”)。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//测试HttpServletRequest属性监听器</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/attraa.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpServletRequestAttr</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        req.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;BJSXT&quot;</span>);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;ITBZ&quot;</span>);</span><br><span class="line">        req.removeAttribute(<span class="string">&quot;key&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//HttpServletRequest对象属性监听器</span></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpServletRequestAttrListener</span> <span class="keyword">implements</span> <span class="title class_">ServletRequestAttributeListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeAdded</span><span class="params">(ServletRequestAttributeEvent srae)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpServletRequestAttrListener------Start Added-----&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name:&quot;</span>+srae.getName()+<span class="string">&quot;vallue:&quot;</span>+srae.getValue());</span><br><span class="line">        System.out.println(srae.getServletRequest());</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpServletRequestAttrListener------End Added------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeRemoved</span><span class="params">(ServletRequestAttributeEvent srae)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpServletRequestAttrListener------Start Removed-----&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name:&quot;</span>+srae.getName()+<span class="string">&quot;vallue:&quot;</span>+srae.getValue());</span><br><span class="line">        System.out.println(srae.getServletRequest());</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpServletRequestAttrListener------Start Removed------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeReplaced</span><span class="params">(ServletRequestAttributeEvent srae)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpServletRequestAttrListener------Start Replaced-----&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Name:&quot;</span>+srae.getName()+<span class="string">&quot;vallue:&quot;</span>+srae.getValue());</span><br><span class="line">        System.out.println(srae.getServletRequest());</span><br><span class="line">        System.out.println(<span class="string">&quot;--HttpServletRequestAttrListener------End Replaced------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="18-5-基于注解式开发监听器"><a href="#18-5-基于注解式开发监听器" class="headerlink" title="18.5  基于注解式开发监听器"></a>18.5  基于注解式开发监听器</h4><p>Listener 支持注解式开发，通过@WebListener 注解替代 web.xml 中 Listener 的配置。</p>
<h3 id="19-Filter与Listener设计模式"><a href="#19-Filter与Listener设计模式" class="headerlink" title="19  Filter与Listener设计模式"></a>19  Filter与Listener设计模式</h3><h4 id="19-1-Filter-的设计模式"><a href="#19-1-Filter-的设计模式" class="headerlink" title="19.1 Filter 的设计模式"></a>19.1 <strong>Filter</strong> <strong>的设计模式</strong></h4><p>在 Servlet 的 Filter 中使用的责任链设计模式。</p>
<h5 id="19-1-1-责任链模式特点"><a href="#19-1-1-责任链模式特点" class="headerlink" title="19.1.1  责任链模式特点"></a>19.1.1  <strong>责任链模式特点</strong></h5><p>责任链（Chain of Responsibility）：责任链模式也叫职责链模式，是一种<em><strong>对象行为模式</strong></em>。在责任链模式里，很多对象由每一个对象对其下一个对象的引用而连接起来形成一条链。请求在这个链上传递，直到链上的某一个对象决定处理此请求。发出这个请求的客户端并不需 要知道链上的哪一个对象最终处理这个请求，这使得系统可以在不影响客户端的情况下动态地重新组织链和分配责任</p>
<h5 id="19-2-2-责任链的优缺点"><a href="#19-2-2-责任链的优缺点" class="headerlink" title="19.2.2 责任链的优缺点"></a>19.2.2 责任链的优缺点</h5><p>优点：</p>
<p>降低了对象之间的耦合度。 </p>
<p>增强了系统的可扩展性。 </p>
<p>增强了给对象指派职责的灵活性。 </p>
<p> 责任链简化了对象之间的连接。 </p>
<p>责任分担。每个类只需要处理自己该处理的工作。 </p>
<p>缺点：</p>
<p>不能保证请求一定被接收。 </p>
<p> 对比较长的责任链，请求的处理可能涉及多个处理对象，系统性能将受到一定影响。 可能会由于责任链的错误设置而导致系统出错，如可能会造成循环调用。</p>
<h4 id="19-2-Listener-的设计模式"><a href="#19-2-Listener-的设计模式" class="headerlink" title="19.2 Listener 的设计模式"></a>19.2 <strong>Listener</strong> <strong>的设计模式</strong></h4><p>在 Servlet 的 Listener 中使用的观察者设计模式</p>
<h5 id="19-2-1-观测者模式的特点"><a href="#19-2-1-观测者模式的特点" class="headerlink" title="19.2.1 观测者模式的特点"></a>19.2.1 观测者模式的特点</h5><p>观察者模式（Observer Pattern）：观察者模式是一种对象行为模式。它定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。 </p>
<h5 id="19-2-2-观察者模式的优缺点"><a href="#19-2-2-观察者模式的优缺点" class="headerlink" title="19.2.2 观察者模式的优缺点"></a>19.2.2 观察者模式的优缺点</h5><p>优点</p>
<p>观察者和被观察者是抽象耦合的。 </p>
<p> 建立一套触发机制。 </p>
<p>缺点</p>
<p>如果一个被观察者对象有很多的直接和间接的观察者的话，将所有的观察者都通知 到会花费很多时间。 </p>
<p>如果在观察者和观察目标之间有循环依赖的话，观察目标会触发它们之间进行循环 调用，可能导致系统崩溃。 </p>
<p>观察者模式没有相应的机制让观察者知道所观察的目标对象是怎么发生变化的，而 仅仅只是知道观察目标发生了变化。</p>
<h2 id="PROJECT-LINK"><a href="#PROJECT-LINK" class="headerlink" title="PROJECT-LINK:"></a>PROJECT-LINK:</h2><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.aliyundrive.com/s/1Utbx84RG7i">https://www.aliyundrive.com/s/1Utbx84RG7i</a>         提取码: zh90 </p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://Starhunter-23.github.io">Magi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://starhunter-23.github.io/archives/1a5315c2.html">https://starhunter-23.github.io/archives/1a5315c2.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://Starhunter-23.github.io" target="_blank">Magi's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Servlet/">Servlet</a></div><div class="post_share"><div class="social-share" data-image="https://w.wallhaven.cc/full/l8/wallhaven-l89k8p.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/archives/5177b49d.html"><img class="prev-cover" src="https://w.wallhaven.cc/full/6d/wallhaven-6dj26w.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">MyBatis学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/archives/30463f21.html"><img class="next-cover" src="/./img/bg2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">XML学习笔记</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/./img/ava.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Magi</div><div class="author-info__description">尘劫有尽，我愿无穷</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/Starhunter-23"><i class="fab fa-github"></i><span>订阅</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Starhunter-23" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2312460355@qq.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">认真如初</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Servlet%E6%8A%80%E6%9C%AF-Author-Magi"><span class="toc-number">1.</span> <span class="toc-text">Servlet技术(@Author: Magi)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81JavaEE%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">一、JavaEE简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFjavaEE"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.什么是javaEE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-JavaEE%E7%89%88%E6%9C%AC"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.JavaEE版本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Servlet%E7%AE%80%E4%BB%8B"><span class="toc-number">1.2.</span> <span class="toc-text">二、Servlet简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Web%E5%BC%80%E5%8F%91%E5%8E%86%E5%8F%B2%E5%9B%9E%E9%A1%BE"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.Web开发历史回顾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1CGI"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">1.1CGI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2CGI%E7%BC%BA%E7%82%B9"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">1.2CGI缺点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3FastCGI"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">1.3FastCGI</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Servlet%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.Servlet介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-Servlet%E6%8A%80%E6%9C%AF%E7%89%B9%E7%82%B9"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">2.1 Servlet技术特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Servlet%E5%9C%A8%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.2 Servlet在应用程序中的位置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.3.</span> <span class="toc-text">三、服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-JavaEE%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88Java-EE-Application-Server%EF%BC%89"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.JavaEE应用服务器（Java  EE Application  Server）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Web%E5%AE%B9%E5%99%A8%EF%BC%88Web-Server%EF%BC%89"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.Web容器（Web Server）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Tomcat%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. Tomcat的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-Tomcat%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.3.1.</span> <span class="toc-text">3.1 Tomcat下载与安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.3.3.1.1.</span> <span class="toc-text">3.1.1 下载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-2-%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.3.1.2.</span> <span class="toc-text">3.1.2 安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-3"><span class="toc-number">1.3.3.1.3.</span> <span class="toc-text">3.1.3</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-Tomcat%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E4%B8%8E%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.3.3.2.</span> <span class="toc-text">3.2 Tomcat目录结构与介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-bin"><span class="toc-number">1.3.3.2.1.</span> <span class="toc-text">3.2.1. bin</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-conf"><span class="toc-number">1.3.3.2.2.</span> <span class="toc-text">3.2.2 conf</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-3-lib"><span class="toc-number">1.3.3.2.3.</span> <span class="toc-text">3.2.3 lib</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-4-logs"><span class="toc-number">1.3.3.2.4.</span> <span class="toc-text">3.2.4 logs</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-5-temp"><span class="toc-number">1.3.3.2.5.</span> <span class="toc-text">3.2.5 temp</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-6-webapps"><span class="toc-number">1.3.3.2.6.</span> <span class="toc-text">3.2.6 webapps</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-7-work"><span class="toc-number">1.3.3.2.7.</span> <span class="toc-text">3.2.7 work</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-Tocmat%E5%90%AF%E5%8A%A8%E4%B8%8E%E5%85%B3%E9%97%AD"><span class="toc-number">1.3.3.3.</span> <span class="toc-text">3.3 Tocmat启动与关闭</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-1-Tomcat%E5%90%AF%E5%8A%A8"><span class="toc-number">1.3.3.3.1.</span> <span class="toc-text">3.3.1 Tomcat启动</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-2-Tomcat%E5%85%B3%E9%97%AD"><span class="toc-number">1.3.3.3.2.</span> <span class="toc-text">3.3.2 Tomcat关闭</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-2-1-%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">1.3.3.3.2.1.</span> <span class="toc-text">3.3.2.1 方式一</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">1.3.3.4.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-2-2-%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="toc-number">1.3.3.4.0.1.</span> <span class="toc-text">3.3.2.2 方式二</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-3-%E8%AE%BF%E9%97%AETomcat"><span class="toc-number">1.3.3.4.1.</span> <span class="toc-text">3.3.3 访问Tomcat</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-Tomcat%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">1.3.3.5.</span> <span class="toc-text">3.4 Tomcat的配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-1-Tomcat%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.3.3.5.1.</span> <span class="toc-text">3.4.1 Tomcat配置文件介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-4-1-1-context-xml"><span class="toc-number">1.3.3.5.1.1.</span> <span class="toc-text">3.4.1.1 context.xml</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-4-1-2-web-xml"><span class="toc-number">1.3.3.5.1.2.</span> <span class="toc-text">3.4.1.2 web.xml</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-4-1-3-server-xml"><span class="toc-number">1.3.3.5.1.3.</span> <span class="toc-text">3.4.1.3 server.xml</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-4-1-4-tomcat-users-xml"><span class="toc-number">1.3.3.5.1.4.</span> <span class="toc-text">3.4.1.4  tomcat-users.xml</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-2-%E8%A7%A3%E5%86%B3%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B9%B1%E7%A0%81"><span class="toc-number">1.3.3.5.2.</span> <span class="toc-text">3.4.2 解决控制台乱码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-3-%E4%BF%AE%E6%94%B9Tomcat%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3"><span class="toc-number">1.3.3.5.3.</span> <span class="toc-text">3.4.3 修改Tomcat监听端口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-4-%E9%85%8D%E7%BD%AETomcat-Manager"><span class="toc-number">1.3.3.5.4.</span> <span class="toc-text">3.4.4 配置Tomcat Manager</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-4-4-1-%E4%BB%80%E4%B9%88%E6%98%AF-Tomcat-Manager"><span class="toc-number">1.3.3.5.4.1.</span> <span class="toc-text">3.4.4.1 什么是 Tomcat Manager</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-4-4-2-%E9%85%8D%E7%BD%AE-Tomcat-Manager-%E7%9A%84%E8%AE%BF%E9%97%AE%E7%94%A8%E6%88%B7"><span class="toc-number">1.3.3.5.4.2.</span> <span class="toc-text">3.4.4.2 配置 Tomcat Manager 的访问用户</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Tomcat%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. Tomcat版本说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Tomcat%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.5.</span> <span class="toc-text">5.Tomcat工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-Tomcat%E4%BD%9C%E7%94%A8"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">5.1 Tomcat作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-Tomcat%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">5.2 Tomcat运行原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Tomcat%E6%9E%B6%E6%9E%84%E8%AE%B2%E8%A7%A3"><span class="toc-number">1.3.6.</span> <span class="toc-text">6. Tomcat架构讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-1-Server%E7%BB%84%E4%BB%B6"><span class="toc-number">1.3.6.0.1.</span> <span class="toc-text">6.2.1 Server组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-2-Service%E7%BB%84%E4%BB%B6"><span class="toc-number">1.3.6.0.2.</span> <span class="toc-text">6.2.2 Service组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-3-Connector%E7%BB%84%E4%BB%B6"><span class="toc-number">1.3.6.0.3.</span> <span class="toc-text">6.2.3 Connector组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-4-Engine%E7%BB%84%E4%BB%B6"><span class="toc-number">1.3.6.0.4.</span> <span class="toc-text">6.2.4 Engine组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-5-Host%E7%BB%84%E4%BB%B6"><span class="toc-number">1.3.6.0.5.</span> <span class="toc-text">6.2.5 Host组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#-1"><span class="toc-number">1.3.6.0.6.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-6-Context%E7%BB%84%E4%BB%B6"><span class="toc-number">1.3.6.0.7.</span> <span class="toc-text">6.2.6 Context组件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-Tomcat%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">6.3  Tomcat处理请求过程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81-Servlet%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.4.</span> <span class="toc-text">四、 Servlet技术详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AAServlet%E6%A1%88%E4%BE%8B"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.创建第一个Servlet案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%88%9B%E5%BB%BAServlet"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">1.1 创建Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E7%BC%96%E8%AF%91Servlet"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">1.2 编译Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%88%9B%E5%BB%BAweb-xml"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">1.3 创建web.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-1-%E4%BB%80%E4%B9%88%E6%98%AFweb-xml"><span class="toc-number">1.4.1.3.1.</span> <span class="toc-text">1.3.1 什么是web.xml</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-2-web-xml-%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%A4%B4%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.1.3.2.</span> <span class="toc-text">1.3.2 web.xml 文件中的头信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-3-%E5%9C%A8-web-xml-%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE-Servlet"><span class="toc-number">1.4.1.3.3.</span> <span class="toc-text">1.3.3 在 web.xml 文件中配置 Servlet</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E9%83%A8%E7%BD%B2Servlet"><span class="toc-number">1.4.1.4.</span> <span class="toc-text">1.4 部署Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-1-Web%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.1.4.1.</span> <span class="toc-text">1.4.1 Web工程目录结构</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-%E8%AE%BF%E9%97%AEServlet"><span class="toc-number">1.4.1.5.</span> <span class="toc-text">1.5 访问Servlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-%E8%AE%BF%E9%97%AE%E8%B5%84%E6%BA%90%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C"><span class="toc-number">1.4.1.6.</span> <span class="toc-text">1.6 访问资源测试结果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Servlet%E7%BB%A7%E6%89%BF%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. Servlet继承结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-Servlet%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">2.1 Servlet接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-GenericServlet%E6%98%AF%E4%B8%AA%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">2.3 GenericServlet是个抽象类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-HttpServlet%E7%B1%BB"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">2.4 HttpServlet类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.Servlet的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Servlet%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. Servlet处理请求的原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Servlet%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.5.</span> <span class="toc-text">5. Servlet的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-Servlet%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.4.5.1.</span> <span class="toc-text">5.1  Servlet的作用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%9C%A8Idea%E4%B8%AD%E5%BC%80%E5%8F%91Servlet"><span class="toc-number">1.4.6.</span> <span class="toc-text">6 在Idea中开发Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E5%9C%A8Idea%E4%B8%AD%E5%88%9B%E5%BB%BAWeb%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.4.6.1.</span> <span class="toc-text">6.1 在Idea中创建Web工程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.4.6.1.1.</span> <span class="toc-text">6.1.1  创建项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-2-%E5%88%9B%E5%BB%BAWeb%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.4.6.1.2.</span> <span class="toc-text">6.1.2  创建Web工程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-2"><span class="toc-number">1.4.6.2.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-3-Web%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.6.2.1.</span> <span class="toc-text">6.1.3  Web工程结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-4-%E4%B8%BA%E9%A1%B9%E7%9B%AE%E6%B7%BB%E5%8A%A0servlet-api-jar"><span class="toc-number">1.4.6.2.2.</span> <span class="toc-text">6.1.4  为项目添加servlet-api.jar</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-5-%E5%9C%A8Idea%E4%B8%AD%E9%85%8D%E7%BD%AETomcat"><span class="toc-number">1.4.6.2.3.</span> <span class="toc-text">6.1.5  在Idea中配置Tomcat</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-6-%E4%BF%AE%E6%94%B9%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84%EF%BC%88Content-Path%EF%BC%89"><span class="toc-number">1.4.6.2.4.</span> <span class="toc-text">6.1.6  修改项目的访问路径（Content Path）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-Idea%E4%B8%AD%E7%9A%84web%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2"><span class="toc-number">1.4.6.3.</span> <span class="toc-text">6.2  Idea中的web项目部署</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-1-%E9%BB%98%E8%AE%A4%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.6.3.1.</span> <span class="toc-text">6.2.1  默认部署方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-2-%E5%B0%86web%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0Tomcat%E7%9A%84webapps%E4%B8%AD"><span class="toc-number">1.4.6.3.2.</span> <span class="toc-text">6.2.2 将web项目部署到Tomcat的webapps中</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-HttpServletRequest-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.7.</span> <span class="toc-text">7.  HttpServletRequest 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.7.1.</span> <span class="toc-text">7.1 获取请求信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.7.2.</span> <span class="toc-text">7.2 获取请求数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-1-%E5%9C%A8Servlet%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.7.2.1.</span> <span class="toc-text">7.2.1 在Servlet获取请求数据的方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-2-%E8%8E%B7%E5%8F%96%E5%A4%8D%E9%80%89%E6%A1%86-checkbox%E7%BB%84%E4%BB%B6-%E4%B8%AD%E7%9A%84%E5%80%BC"><span class="toc-number">1.4.7.2.2.</span> <span class="toc-text">7.2.2 获取复选框(checkbox组件)中的值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-3-%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE%E7%9A%84-key"><span class="toc-number">1.4.7.2.3.</span> <span class="toc-text">7.2.3 获取所有提交数据的 key</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-4-%E4%BD%BF%E7%94%A8-Map-%E7%BB%93%E6%9E%84%E8%8E%B7%E5%8F%96%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.7.2.4.</span> <span class="toc-text">7.2.4 使用 Map 结构获取提交数据</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-3"><span class="toc-number">1.4.7.3.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E7%BC%96%E7%A0%81"><span class="toc-number">1.4.7.4.</span> <span class="toc-text">7.3 设置请求编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4-%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.7.5.</span> <span class="toc-text">7.4 资源访问方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-1-%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">1.4.7.5.1.</span> <span class="toc-text">7.4.1 绝对路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-4-2-%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">1.4.7.5.2.</span> <span class="toc-text">7.4.2 相对路径</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-5-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.7.6.</span> <span class="toc-text">7.5 获取请求头信息</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-5-1-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.7.6.1.</span> <span class="toc-text">7.5.1 获取请求头信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-5-2-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E6%A1%88%E4%BE%8B"><span class="toc-number">1.4.7.6.2.</span> <span class="toc-text">7.5.2 获取请求头案例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-6HttpServletRequest%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.4.7.7.</span> <span class="toc-text">7.6HttpServletRequest对象的生命周期</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-HttpServletResponse-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.8.</span> <span class="toc-text">8   HttpServletResponse 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.4.8.1.</span> <span class="toc-text">8.1 设置响应类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-1-%E8%AE%BE%E7%BD%AE%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%93%8D%E5%BA%94"><span class="toc-number">1.4.8.1.1.</span> <span class="toc-text">8.1.1 设置字符型响应</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-2-%E8%AE%BE%E7%BD%AE%E5%AD%97%E8%8A%82%E5%9E%8B%E5%93%8D%E5%BA%94"><span class="toc-number">1.4.8.1.2.</span> <span class="toc-text">8.1.2 设置字节型响应</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E7%BC%96%E7%A0%81"><span class="toc-number">1.4.8.2.</span> <span class="toc-text">8.2 设置响应编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-%E5%9C%A8%E5%93%8D%E5%BA%94%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%99%84%E5%8A%A0%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.8.3.</span> <span class="toc-text">8.3 在响应中添加附加信息</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-3-1-%E9%87%8D%E5%AE%9A%E5%90%91%E5%93%8D%E5%BA%94"><span class="toc-number">1.4.8.3.1.</span> <span class="toc-text">8.3.1 重定向响应</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-3-2-%E9%87%8D%E5%AE%9A%E5%90%91%E5%93%8D%E5%BA%94%E6%A1%88%E4%BE%8B"><span class="toc-number">1.4.8.3.2.</span> <span class="toc-text">8.3.2 重定向响应案例</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-3-3%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.4.8.3.3.</span> <span class="toc-text">8.3.3文件下载</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-3-4-%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E5%90%8D%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.4.8.3.4.</span> <span class="toc-text">8.3.4 解决文件名中文乱码问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-ServletContext%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.9.</span> <span class="toc-text">9  ServletContext对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-ServletContext%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.4.9.1.</span> <span class="toc-text">9.1 ServletContext对象介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-ServletContext%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.4.9.2.</span> <span class="toc-text">9.2 ServletContext对象的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-ServletContext%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">1.4.9.3.</span> <span class="toc-text">9.3 ServletContext对象的应用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-1-%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E8%BD%AC%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">1.4.9.3.1.</span> <span class="toc-text">9.3.1 相对路径转绝对路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-2-%E8%8E%B7%E5%8F%96%E5%AE%B9%E5%99%A8%E7%9A%84%E9%99%84%E5%8A%A0%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.9.3.2.</span> <span class="toc-text">9.3.2 获取容器的附加信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-3-%E8%8E%B7%E5%8F%96-web-xml-%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.9.3.3.</span> <span class="toc-text">9.3.3 获取 web.xml 文件中的信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-4-%E5%85%A8%E5%B1%80%E5%AE%B9%E5%99%A8"><span class="toc-number">1.4.9.3.4.</span> <span class="toc-text">9.3.4 全局容器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-ServletContext%E5%AF%B9%E8%B1%A1%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.4.9.4.</span> <span class="toc-text">9.4 ServletContext对象生命周期</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-ServletConfig%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.10.</span> <span class="toc-text">10 ServletConfig对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-Cookie%E5%AF%B9%E8%B1%A1%E4%B8%8EHttpSession%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.11.</span> <span class="toc-text">11 Cookie对象与HttpSession对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E4%BA%8E%E7%BB%B4%E6%8A%A4%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%9A%84%E4%BC%9A%E8%AF%9D%E7%8A%B6%E6%80%81%E7%9A%84%E7%BB%B4%E6%8C%81"><span class="toc-number">1.4.12.</span> <span class="toc-text">(用于维护客户端与服务端的会话状态的维持)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-Cookie%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.12.1.</span> <span class="toc-text">11.1 Cookie对象</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-1-Cookie%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.4.12.1.1.</span> <span class="toc-text">11.1.1 Cookie对象的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-2-Cookie%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.4.12.1.2.</span> <span class="toc-text">11.1.2 Cookie对象的创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-3-%E8%8E%B7%E5%8F%96Cookie%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.12.1.3.</span> <span class="toc-text">11.1.3 获取Cookie中的数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-4-%E8%A7%A3%E5%86%B3Cookie%E4%B8%8D%E6%94%AF%E6%8C%81%E4%B8%AD%E6%96%87"><span class="toc-number">1.4.12.1.4.</span> <span class="toc-text">11.1.4  解决Cookie不支持中文</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-5-Cookie%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">1.4.12.1.5.</span> <span class="toc-text">11.1.5 Cookie跨域问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-6-%E7%8A%B6%E6%80%81Cookie%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96Cookie"><span class="toc-number">1.4.12.1.6.</span> <span class="toc-text">11.1.6 状态Cookie和持久化Cookie</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-7-%E9%80%9A%E8%BF%87Cookie%E5%AE%9E%E7%8E%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BC%9A%E8%AF%9D%E7%9A%84%E7%BB%B4%E6%8C%81-%E6%A1%88%E4%BE%8B"><span class="toc-number">1.4.12.1.7.</span> <span class="toc-text">11.1.7 通过Cookie实现客户端与服务端会话的维持(案例)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-1-8-Cookie%E6%80%BB%E7%BB%93"><span class="toc-number">1.4.12.1.8.</span> <span class="toc-text">11.1.8 Cookie总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-2-HttpSession%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.4.12.2.</span> <span class="toc-text">11.2 HttpSession对象</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#11-2-1-HttpSession%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.4.12.2.1.</span> <span class="toc-text">11.2.1 HttpSession对象的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-2-2-HttpSession%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.4.12.2.2.</span> <span class="toc-text">11.2.2 HttpSession对象的创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-2-3-%E8%8E%B7%E5%8F%96HttpSession%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.12.2.3.</span> <span class="toc-text">11.2.3 获取HttpSession中的数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-2-4-HttpSession%E7%9A%84%E9%94%80%E6%AF%81%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.12.2.4.</span> <span class="toc-text">11.2.4 HttpSession的销毁方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-2-5-%E9%80%9A%E8%BF%87HttpSession%E5%AE%9E%E7%8E%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E4%BC%9A%E8%AF%9D%E7%9A%84%E7%BB%B4%E6%8C%81"><span class="toc-number">1.4.12.2.5.</span> <span class="toc-text">11.2.5 通过HttpSession实现客户端与服务端会话的维持</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-2-6-HttpSession%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.4.12.2.6.</span> <span class="toc-text">11.2.6 HttpSession生命周期</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-3-HttpSession%E5%AF%B9%E8%B1%A1%E6%80%BB%E7%BB%93"><span class="toc-number">1.4.12.3.</span> <span class="toc-text">11.3 HttpSession对象总结</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#11-3-1-HttpSession-%E4%B8%8E-Cookie-%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9A"><span class="toc-number">1.4.12.3.1.</span> <span class="toc-text">11.3.1 HttpSession 与 Cookie 的区别：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-3-2-HttpSession%E7%9A%84%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.4.12.3.2.</span> <span class="toc-text">11.3.2 HttpSession的使用建议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E8%87%AA%E5%90%AF%E5%8A%A8Servlet"><span class="toc-number">1.4.13.</span> <span class="toc-text">12 自启动Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-1-%E8%87%AA%E5%90%AF%E5%8A%A8Servlet%E7%89%B9%E7%82%B9"><span class="toc-number">1.4.13.1.</span> <span class="toc-text">12.1 自启动Servlet特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-2-%E9%80%9A%E8%BF%87%E8%87%AA%E5%90%AF%E5%8A%A8Servlet%E5%AE%9E%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF%E7%9A%84%E8%AF%BB%E5%8F%96"><span class="toc-number">1.4.13.2.</span> <span class="toc-text">12.2 通过自启动Servlet实现配置信息的读取</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-Servlet%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-number">1.4.14.</span> <span class="toc-text">13 Servlet线程安全问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-Servlet%E7%9A%84url-pattern%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.15.</span> <span class="toc-text">14 Servlet的url-pattern配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#14-1-URL%E7%9A%84%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99"><span class="toc-number">1.4.15.1.</span> <span class="toc-text">14.1 URL的匹配规则</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#14-1-1-%E7%B2%BE%E7%A1%AE%E5%8C%B9%E9%85%8D"><span class="toc-number">1.4.15.1.1.</span> <span class="toc-text">14.1.1 精确匹配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-1-2-%E6%8B%93%E5%B1%95%E5%90%8D%E5%8C%B9%E9%85%8D"><span class="toc-number">1.4.15.1.2.</span> <span class="toc-text">14.1.2. 拓展名匹配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-1-3-%E8%B7%AF%E5%BE%84%E5%8C%B9%E9%85%8D"><span class="toc-number">1.4.15.1.3.</span> <span class="toc-text">14.1.3 路径匹配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-1-4-%E4%BB%BB%E6%84%8F%E5%8C%B9%E9%85%8D"><span class="toc-number">1.4.15.1.4.</span> <span class="toc-text">14.1.4 任意匹配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-1-5-%E4%BC%98%E5%85%88%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.4.15.1.5.</span> <span class="toc-text">14.1.5 优先顺序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-1-6-%E8%80%83%E8%80%83%E4%BD%A0"><span class="toc-number">1.4.15.1.6.</span> <span class="toc-text">14.1.6 考考你</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-2-URL%E6%98%A0%E5%B0%84%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.15.2.</span> <span class="toc-text">14.2 URL映射方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#14-2-1-%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">1.4.15.2.1.</span> <span class="toc-text">14.2.1 方式一</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#14-2-2-%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="toc-number">1.4.15.2.2.</span> <span class="toc-text">14.2.2 方式二</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E5%9F%BA%E6%9C%AC%E6%B3%A8%E8%A7%A3%E5%BC%8F%E5%BC%80%E5%8F%91Servlet"><span class="toc-number">1.4.16.</span> <span class="toc-text">15 基本注解式开发Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#15-1-WebServlet-%E6%B3%A8%E8%A7%A3%E4%B8%AD%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.16.1.</span> <span class="toc-text">15.1@WebServlet 注解中属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-2-WebInitParam-%E6%B3%A8%E8%A7%A3%E4%B8%AD%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.16.2.</span> <span class="toc-text">15.2@WebInitParam 注解中的属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.4.17.</span> <span class="toc-text">16  文件上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-Filter%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">1.4.18.</span> <span class="toc-text">17 Filter过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#17-1-%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BD%9C%E7%94%A8"><span class="toc-number">1.4.18.1.</span> <span class="toc-text">17.1 过滤器作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-2-Filter%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.18.2.</span> <span class="toc-text">17.2 Filter的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#17-2-1-Filter%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.4.18.2.1.</span> <span class="toc-text">17.2.1 Filter对象的创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#17-2-2-%E5%9C%A8Filter%E4%B8%AD%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E7%BC%96%E7%A0%81"><span class="toc-number">1.4.18.2.2.</span> <span class="toc-text">17.2.2 在Filter中设置请求编码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#17-2-3"><span class="toc-number">1.4.18.2.3.</span> <span class="toc-text">17.2.3</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-3-FilterChain-%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE"><span class="toc-number">1.4.18.3.</span> <span class="toc-text">17.3 FilterChain(过滤器链)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-4-Filter%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.4.18.4.</span> <span class="toc-text">17.4 Filter的生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-5-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E5%BC%8F%E5%BC%80%E5%8F%91Filter"><span class="toc-number">1.4.18.5.</span> <span class="toc-text">17.5 基于注解式开发Filter</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-Listener-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.</span> <span class="toc-text">18 Listener 监听器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#18-1-%E7%9B%91%E5%90%AC%E5%99%A8%E5%88%86%E7%B1%BB"><span class="toc-number">1.4.19.1.</span> <span class="toc-text">18.1 监听器分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-2-ServletContext-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.2.</span> <span class="toc-text">18.2 ServletContext 监听器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#18-2-1-ServletContext-%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.2.1.</span> <span class="toc-text">18.2.1 ServletContext 对象的生命周期监听器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#18-2-2-ServletContext%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E6%93%8D%E4%BD%9C%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.2.2.</span> <span class="toc-text">18.2.2 ServletContext对象的属性操作监听器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-3-HttpSession-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.3.</span> <span class="toc-text">18.3  HttpSession 监听器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#18-3-1HttpSession-%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.3.1.</span> <span class="toc-text">18.3.1HttpSession 对象的生命周期监听器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#18-3-2-HttpSession-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E6%93%8D%E4%BD%9C%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.3.2.</span> <span class="toc-text">18.3.2 HttpSession 对象的属性操作监听器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-4-HttpServletRequest-%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.4.</span> <span class="toc-text">18.4 HttpServletRequest 监听器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#18-4-1-HttpServletRequest-%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.4.1.</span> <span class="toc-text">18.4.1 HttpServletRequest 对象的生命周期监听器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#18-4-2-HttpServletRequest-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E6%93%8D%E4%BD%9C%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.4.2.</span> <span class="toc-text">18.4.2  HttpServletRequest 对象的属性操作监听器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-5-%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E5%BC%8F%E5%BC%80%E5%8F%91%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.4.19.5.</span> <span class="toc-text">18.5  基于注解式开发监听器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-Filter%E4%B8%8EListener%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.20.</span> <span class="toc-text">19  Filter与Listener设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#19-1-Filter-%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.20.1.</span> <span class="toc-text">19.1 Filter 的设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#19-1-1-%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F%E7%89%B9%E7%82%B9"><span class="toc-number">1.4.20.1.1.</span> <span class="toc-text">19.1.1  责任链模式特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#19-2-2-%E8%B4%A3%E4%BB%BB%E9%93%BE%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">1.4.20.1.2.</span> <span class="toc-text">19.2.2 责任链的优缺点</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-2-Listener-%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.20.2.</span> <span class="toc-text">19.2 Listener 的设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#19-2-1-%E8%A7%82%E6%B5%8B%E8%80%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.4.20.2.1.</span> <span class="toc-text">19.2.1 观测者模式的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#19-2-2-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">1.4.20.2.2.</span> <span class="toc-text">19.2.2 观察者模式的优缺点</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PROJECT-LINK"><span class="toc-number">1.5.</span> <span class="toc-text">PROJECT-LINK:</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/archives/cd8a06a9.html" title="教资科目一（上册）"><img src="https://www.10wallpaper.com/wallpaper/medium/1308/palm_ball_glass-Macro_photography_wallpaper_medium.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="教资科目一（上册）"/></a><div class="content"><a class="title" href="/archives/cd8a06a9.html" title="教资科目一（上册）">教资科目一（上册）</a><time datetime="2022-10-02T10:15:26.000Z" title="发表于 2022-10-02 18:15:26">2022-10-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/43d80f02.html" title="Who Am I"><img src="https://w.wallhaven.cc/full/gp/wallhaven-gpz9v7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Who Am I"/></a><div class="content"><a class="title" href="/archives/43d80f02.html" title="Who Am I">Who Am I</a><time datetime="2022-09-27T11:48:26.000Z" title="发表于 2022-09-27 19:48:26">2022-09-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/bd6b9883.html" title="Java Server Page"><img src="https://w.wallhaven.cc/full/o5/wallhaven-o591j5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java Server Page"/></a><div class="content"><a class="title" href="/archives/bd6b9883.html" title="Java Server Page">Java Server Page</a><time datetime="2022-09-27T08:56:26.000Z" title="发表于 2022-09-27 16:56:26">2022-09-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/cf486ef4.html" title="Ajax学习笔记"><img src="https://w.wallhaven.cc/full/85/wallhaven-857km1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ajax学习笔记"/></a><div class="content"><a class="title" href="/archives/cf486ef4.html" title="Ajax学习笔记">Ajax学习笔记</a><time datetime="2022-09-27T08:56:26.000Z" title="发表于 2022-09-27 16:56:26">2022-09-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/130d9e8d.html" title="Maven的应用与实战"><img src="https://w.wallhaven.cc/full/x6/wallhaven-x65jzl.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Maven的应用与实战"/></a><div class="content"><a class="title" href="/archives/130d9e8d.html" title="Maven的应用与实战">Maven的应用与实战</a><time datetime="2022-09-27T08:55:26.000Z" title="发表于 2022-09-27 16:55:26">2022-09-27</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 By Magi</div><div class="footer_custom_text"><div>不锈钢炒🍅</div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div></div></body></html>